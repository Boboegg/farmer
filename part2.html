<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é€€ä¼‘è©¦ç®— - å°Šåš´è¾²æ¥­</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM (React 18 UMD) -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    
    <!-- Babel (è®“æˆ‘å€‘å¯ä»¥ç”¨ JSX / ES6 ç›´æ¥å¯«åœ¨ script å…§) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- å·²ç§»é™¤ Recharts / PropTypes / React-Isï¼šæ”¹ç”¨è‡ªå·±ç•«åœ– -->

    <style>
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        @keyframes fade-in { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fade-in 0.5s ease-out forwards; }
        @keyframes bounce-slow { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        .animate-bounce-slow { animation: bounce-slow 3s infinite; }

        /* é€€ä¼‘è©¦ç®—æ©Ÿè¼¸å…¥æ¨£å¼ */
        .label-text {
            display: block;
            font-size: 0.75rem;
            font-weight: 600;
            color: #64748b;
            margin-bottom: 0.25rem;
        }
        .input-field {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #cbd5e1;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            outline: none;
            transition: all 0.2s;
        }
        .input-field:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
    </style>
</head>
<body class="bg-slate-50">
<div id="root"></div>

<script type="text/babel">
    const { useState, useEffect } = React;

    // --- Lucide Icon helper ---
    const createLucideComponent = (name) => ({ size = 24, className = "", ...props }) => {
        const icon = lucide.icons[name];
        if (!icon) return <span className="text-xs">?</span>;
        return (
            <svg {...icon.attrs} width={size} height={size} className={className} {...props}>
                {icon.children && icon.children.map(([tag, attrs], index) => {
                    const Tag = tag;
                    return <Tag key={index} {...attrs} />;
                })}
            </svg>
        );
    };

    const iconList = [
        'Shield', 'Sun', 'AlertTriangle', 'Activity', 'Sprout',
        'Users', 'BookOpen', 'Phone', 'Download', 'ChevronDown',
        'ChevronUp', 'Menu', 'X', 'ArrowRight', 'Heart', 'DollarSign',
        'Tractor', 'HelpCircle', 'Video', 'MessageCircle', 'PlayCircle',
        'Calendar', 'Hammer', 'MapPin', 'ThumbsUp', 'Share2', 'Search',
        'Wind', 'Droplets', 'Mic', 'Globe', 'Clock',
        'Calculator', 'TrendingUp', 'Briefcase', 'ArrowRightLeft', 'Info',
        'AlertCircle', 'ExternalLink', 'Settings', 'PiggyBank', 'Coins'
    ];

    const Icons = {};
    iconList.forEach(name => { Icons[name] = createLucideComponent(name); });

    const {
        Shield, Sun, AlertTriangle, Activity, Sprout,
        Users, BookOpen, Phone, Download, ChevronDown,
        ChevronUp, Menu, X, ArrowRight, Heart, DollarSign,
        Tractor, HelpCircle, Video, MessageCircle, PlayCircle,
        Calendar, Hammer, MapPin, ThumbsUp, Share2, Search,
        Wind, Droplets, Mic, Globe, Clock,
        Calculator, TrendingUp, Briefcase, ArrowRightLeft, Info,
        AlertCircle, ExternalLink, Settings, PiggyBank, Coins
    } = Icons;

    // --- å¤šèªç³»ï¼ˆä¸»è¦ç”¨ zhï¼‰ ---
    const translations = {
        zh: {
            title: "å°Šåš´è¾²æ¥­",
            subtitle: "çŸ¥è­˜ä¸­å¿ƒ",
            heroDesc: "é€£çµæ”¿åºœè³‡æºã€é†«ç™‚å°ˆæ¥­èˆ‡åœ¨åœ°ç¶“é©—ï¼Œè®“è¾²æ¥­æˆç‚ºä¸€ä»½æœ‰å°Šåš´ã€å¯æ°¸çºŒçš„å¿—æ¥­ã€‚",
            todayRisk: "ä»Šæ—¥ç†±å±å®³é¢¨éšª",
            high: "é«˜å±éšª",
            nav: {
                home: "é¦–é ",
                start: "å¾äº‹è¾²æ¥­",
                greenhouse: "æº«å®¤æ©Ÿå…·",
                safety: "æ€¥æ•‘ç´…ç‰Œ",
                health: "å¥åº·ä¿ƒé€²",
                insurance: "ä¿éšªç¶“æ¿Ÿ",
                calculator: "é€€ä¼‘è©¦ç®—",
                forum: "äº¤æµåœ’åœ°",
                video: "å½±éŸ³å­¸ç¿’",
                resources: "è³‡æºä¸‹è¼‰"
            },
            identity: {
                new: "æˆ‘æƒ³å‹™è¾² (æ–°æ‰‹)",
                young: "æˆ‘æ˜¯é’è¾² / åœ¨è·",
                senior: "æˆ‘æ˜¯è³‡æ·±è¾²å‹",
                enter: "é€²å…¥å°ˆå€"
            },
            section: {
                forum: "æœ€æ–°äº¤æµå‹•æ…‹",
                video: "ç†±é–€å½±éŸ³æ¨è–¦",
                more: "æŸ¥çœ‹æ›´å¤š"
            },
            redCard: {
                heatTitle: "ç´…ç‰Œ 1ï¼šç†±åˆ°å—ä¸äº† (ä¸­æš‘)",
                pestTitle: "ç´…ç‰Œ 2ï¼šè¾²è—¥ä¸­æ¯’",
                heatSub: "æ³¨æ„ï¼æµä¸å‡ºæ±—æ˜¯æœ€å±éšªçš„è¨Šè™Ÿ",
                pestSub: "åˆ¥ç¡¬æ’ï¼é€™æœƒå‚·åˆ°ç¥ç¶“"
            }
        },
        en: {
            title: "Dignified Agri",
            subtitle: "Knowledge Hub",
            heroDesc: "Connecting resources, medical expertise, and local experience for sustainable agriculture.",
            todayRisk: "Today's Heat Risk",
            high: "High",
            nav: {
                home: "Home",
                start: "Start Farming",
                greenhouse: "Greenhouse",
                safety: "Emergency SOS",
                health: "Health Promo",
                insurance: "Insurance",
                calculator: "Calculator",
                forum: "Community",
                video: "Videos",
                resources: "Downloads"
            },
            identity: {
                new: "New Farmer",
                young: "Professional",
                senior: "Senior Farmer",
                enter: "Enter"
            },
            section: {
                forum: "Latest Discussions",
                video: "Featured Videos",
                more: "View More"
            },
            redCard: {
                heatTitle: "Red Card 1: Heat Stroke",
                pestTitle: "Red Card 2: Pesticide Poisoning",
                heatSub: "Warning! No sweating is a danger sign.",
                pestSub: "Don't endure it! Seek help immediately."
            }
        },
        id: {
            title: "Pertanian Bermartabat",
            subtitle: "Pusat Pengetahuan",
            heroDesc: "Menghubungkan sumber daya pemerintah dan medis untuk pertanian berkelanjutan.",
            todayRisk: "Risiko Panas Hari Ini",
            high: "Tinggi",
            nav: {
                home: "Beranda",
                start: "Mulai Bertani",
                greenhouse: "Rumah Kaca",
                safety: "SOS Darurat",
                health: "Kesehatan",
                insurance: "Asuransi",
                calculator: "Kalkulator",
                forum: "Komunitas",
                video: "Video",
                resources: "Unduhan"
            },
            identity: {
                new: "Petani Baru",
                young: "Profesional",
                senior: "Petani Senior",
                enter: "Masuk"
            },
            section: {
                forum: "Diskusi Terbaru",
                video: "Video Pilihan",
                more: "Lihat Lebih"
            },
            redCard: {
                heatTitle: "Kartu Merah 1: Sengatan Panas",
                pestTitle: "Kartu Merah 2: Keracunan Pestisida",
                heatSub: "Peringatan! Tidak berkeringat adalah tanda bahaya.",
                pestSub: "Segera cari pertolongan medis!"
            }
        }
    };

    // --- å‡è³‡æ–™ï¼ˆç°¡åŒ–ç‰ˆï¼‰ ---
    const videoData = [
        {
            id: 1,
            title: "EP1: é‚£äº›å¹´ï¼Œæˆ‘å€‘ä¸€èµ·è¿½çš„é³³æ¢¨",
            youtubeId: "bL80n414nq0",
            type: "Podcast",
            views: "1.2k",
            date: "2å¤©å‰",
            desc: "è«‡é³³æ¢¨è¾²æ¡æ”¶çš„è¾›é…¸ï¼Œèˆ‡è…°ç—›çš„å…±è™•ä¹‹é“ã€‚",
            coverColor: "bg-purple-600"
        },
        {
            id: 2,
            title: "3åˆ†é˜ç”°é–“ä¼¸å±•æ“ï¼šè²“ç‰›å¼",
            youtubeId: "nGFe2xwdTB8",
            type: "Video",
            views: "3.5k",
            date: "1é€±å‰",
            desc: "å°å¤§ç‰©ç†æ²»ç™‚å¸«è¦ªè‡ªç¤ºç¯„ï¼Œèˆ’ç·©ä¸‹èƒŒç—›ã€‚",
            coverColor: "bg-red-500"
        },
        {
            id: 3,
            title: "è¾²è—¥é˜²è­·è¡£ç©¿è„« SOP æ•™å­¸",
            youtubeId: "a6uXnmb_BP0",
            type: "Video",
            views: "2.1k",
            date: "3é€±å‰",
            desc: "å…ˆè„«æ‰‹å¥—é‚„æ˜¯å…ˆè„«è¡£æœï¼ŸåšéŒ¯æ­¥é©Ÿæ›´å±éšªï¼",
            coverColor: "bg-red-500"
        }
    ];

    const safetyData = {
        heat: {
            level: "High Risk",
            symptoms: [
                { text: "é ­æšˆã€æƒ³åã€é ­å¾ˆç—›", icon: "ğŸ˜µ" },
                { text: "çš®è†šä¹¾ä¹¾ç‡™ç‡™ï¼ˆæ²’æµæ±—ï¼‰", icon: "ğŸ”¥" },
                { text: "èªªè©±ä¸æ¸…æ¥šã€æ˜å€’", icon: "ğŸ’¤" }
            ],
            actions: [
                { step: "1. æ‰¾é™°æ¶¼", desc: "è¶•å¿«å»æ¨¹ä¸‹æˆ–é™°å½±è™•", icon: <Wind size={20}/> },
                { step: "2. è„«è¡£æœ", desc: "è¡£æœé¬†é–‹ã€çš®å¸¶è§£é–‹", icon: <Users size={20}/> },
                { step: "3. æ½‘å†·æ°´", desc: "èº«é«”æ½‘æ°´é™æº«", icon: <Droplets size={20}/> },
                { step: "4. æ‰“119", desc: "äººæ˜å€’äº†ç«‹åˆ»å«æ•‘è­·è»Š", icon: <Phone size={20}/> }
            ]
        },
        pesticide: {
            level: "Critical",
            symptoms: [
                { text: "ç³å­”ç¸®åˆ°å¾ˆå°", icon: "ğŸ‘€" },
                { text: "ä¸€ç›´æµå£æ°´ã€æµçœ¼æ·š", icon: "ğŸ’¦" },
                { text: "æ‰‹è…³ä¸€ç›´æŠ–ã€å¸ä¸åˆ°æ°£", icon: "ğŸ’ª" }
            ],
            actions: [
                { step: "ç¦å‚¬å", desc: "åƒè¬ä¸è¦å‚¬åï¼æœƒç¼å‚·", icon: <X size={20}/> },
                { step: "æ²–ä¹¾æ·¨", desc: "è„«æ‰é«’è¡£æœï¼Œæ²–æ°´æ´—æ¾¡", icon: <Droplets size={20}/> },
                { step: "å¸¶ç“¶å­", desc: "æŠŠè¾²è—¥ç“¶å­å¸¶è‘—çµ¦é†«ç”Ÿçœ‹", icon: <BookOpen size={20}/> },
                { step: "å¿«é€é†«", desc: "æ‰“119 æˆ– æ¯’ç‰©ä¸­å¿ƒ", icon: <Phone size={20}/> }
            ]
        }
    };

    const forumPosts = [
        {
            id: 1,
            author: "æ–°æ‰‹é’è¾²_é˜¿è±ª",
            avatar: "è±ª",
            title: "æ€¥ï¼è«‹å•æ°‘é›„å“ªè£¡æœ‰ä¿®å‰²è‰æ©Ÿçš„å¸«å‚…ï¼Ÿ",
            tag: "ç¶­ä¿®äº’åŠ©",
            content: "æˆ‘çš„èƒŒè² å¼å‰²è‰æ©Ÿçªç„¶ç™¼ä¸å‹•ï¼Œå·²ç¶“æ›éç«æ˜Ÿå¡é‚„æ˜¯ä¸€æ¨£ã€‚"
        },
        {
            id: 2,
            author: "æ—ºä¾†ä¼¯",
            avatar: "æ—º",
            title: "æœ€è¿‘é³³æ¢¨åƒ¹æ ¼æ³¢å‹•å¤§ï¼Œå¤§å®¶æœ‰ä¿æ”¶å…¥ä¿éšªå—ï¼Ÿ",
            tag: "ç¶“æ¿Ÿè¨è«–",
            content: "è½èªªæœ‰ä¸€ç¨®ã€Œè¾²æ¥­ä¿éšªã€å¯ä»¥è£œè²¼åƒ¹å·®ï¼Œæœ‰äººå¯¦éš›ç”³è«‹éå—ï¼Ÿ"
        },
        {
            id: 3,
            author: "æº«å®¤å°é™³",
            avatar: "é™³",
            title: "[è´ˆé€] é€™è£¡æœ‰å¤šé¤˜çš„ 60% é®é™½ç¶²",
            tag: "ç‰©è³‡äº¤æµ",
            content: "æ›æ–°ç¶²å­ï¼ŒèˆŠçš„é‚„å ªç”¨ï¼Œç´„ 10 ç±³é•·ï¼Œæœ‰éœ€è¦çš„å¯ä»¥ä¾†è¼‰ã€‚"
        }
    ];

    const qaData = [
        {
            category: "ä¿éšªè¿·æ€",
            q: "æˆ‘æœ‰è¾²ä¿äº†ï¼Œé‚„éœ€è¦å¥ä¿å—ï¼Ÿ",
            a: "éœ€è¦ã€‚å¥ä¿æ˜¯çœ‹é†«ç”Ÿä½é™¢ç”¨çš„ï¼Œè¾²ä¿æ˜¯èº«åˆ†ä¿éšªï¼Œå…©è€…åŠŸèƒ½ä¸åŒã€‚å»ºè­°è‡³å°‘åŒæ™‚æ“æœ‰å¥ä¿ï¼‹è¾²ä¿ï¼Œä¸¦è¦–æƒ…æ³åŠ ä¿è·ç½ç›¸é—œä¿éšªã€‚"
        },
        {
            category: "è·ç½èªå®š",
            q: "æˆ‘åœ¨ç”°è£¡æšˆå€’ï¼Œç®—æ˜¯è·æ¥­ç½å®³å—ï¼Ÿ",
            a: "åŸå‰‡ä¸Šè‹¥æ˜¯åœ¨å·¥ä½œæ™‚é–“ã€å·¥ä½œåœ°é»ç™¼ç”Ÿï¼Œä¸”èˆ‡å·¥ä½œæœ‰ç›¸ç•¶å› æœé—œä¿‚ï¼Œå°±å¯èƒ½è¢«èªå®šç‚ºè·ç½ã€‚å»ºè­°å°±é†«æ™‚æ¸…æ¥šå‘é†«å¸«èªªæ˜ã€Œç™¼ç”Ÿæ™‚é–“ã€åœ°é»èˆ‡å·¥ä½œå…§å®¹ã€ï¼Œä¸¦ä¿ç•™ç›¸é—œè­‰æ“šã€‚"
        }
    ];

    const exerciseData = [
        {
            title: "è²“ç‰›å¼ï¼ˆæ•‘æ•‘ä½ çš„è…°ï¼‰",
            target: "é•·æ™‚é–“å½è…°æ‹”è‰çš„äºº",
            steps: [
                "é›™æ‰‹æ’åœ¨å¤§è…¿æˆ–æ¤…å­ä¸Šï¼Œä¿æŒè„Šæ¤ä¸­ç«‹ã€‚",
                "å¸æ°£æ™‚æŠ¬é ­æŒºèƒ¸ï¼ˆç‰›å¼ï¼‰ï¼Œæ„Ÿè¦ºè…°éƒ¨æ‰“é–‹ã€‚",
                "åæ°£æ™‚ä½é ­å«èƒ¸ï¼ˆè²“å¼ï¼‰ï¼ŒèƒŒéƒ¨æ‹±èµ·ã€‚",
                "é‡è¤‡ 10 æ¬¡ã€‚"
            ]
        },
        {
            title: "æŠ±è†ä¼¸å±•ï¼ˆæ”¾é¬†ä¸‹èƒŒï¼‰",
            target: "æ¬é‡ç‰©è…°ç— çš„äºº",
            steps: [
                "å¹³èººåœ¨åºŠä¸Šæˆ–ç‘œçˆå¢Šã€‚",
                "å–®è…³æˆ–é›™è…³æŠ±è†é è¿‘èƒ¸å£ã€‚",
                "ç¶­æŒ 20ï½30 ç§’ï¼Œæ„Ÿè¦ºä¸‹èƒŒè¢«æ‹‰é–‹ã€‚",
                "å·¦å³è…³å„åš 3 çµ„ã€‚"
            ]
        },
        {
            title: "æ¯›å·¾è½‰è‚©ï¼ˆæ”¾é¬†è‚©è†€ï¼‰",
            target: "å¸¸å¸¸èˆ‰æ‰‹å™´è—¥çš„äºº",
            steps: [
                "é›™æ‰‹å„æŠ“æ¯›å·¾å…©ç«¯ï¼Œå¯¬åº¦ç•¥å¤§æ–¼è‚©å¯¬ã€‚",
                "æ‰‹è‡‚æ‰“ç›´ï¼Œæ…¢æ…¢å¾€ä¸ŠæŠ¬éé ­é ‚ã€‚",
                "é‡åŠ›è€Œç‚ºï¼Œæ„Ÿè¦ºèƒ¸å£èˆ‡è‚©è†€è¢«æ‹‰é–‹ã€‚",
                "ä¾†å› 10ï½15 æ¬¡ã€‚"
            ]
        }
    ];

    // --- UI å°å…ƒä»¶ ---

    const Badge = ({ children, color = "green" }) => {
        const colors = {
            green: "bg-emerald-100 text-emerald-700",
            blue: "bg-blue-100 text-blue-700",
            purple: "bg-purple-100 text-purple-700",
            red: "bg-red-100 text-red-700",
            orange: "bg-orange-100 text-orange-700",
            gray: "bg-gray-100 text-gray-700",
            white: "bg-white/90 text-slate-800"
        };
        return (
            <span className={`text-xs font-bold px-2.5 py-0.5 rounded-full ${colors[color] || colors.gray}`}>
                {children}
            </span>
        );
    };

    const SOSButton = ({ onClick, label }) => (
        <button
            onClick={onClick}
            className="fixed bottom-6 right-6 z-50 bg-red-600 hover:bg-red-700 text-white px-4 py-3 rounded-full shadow-2xl flex items-center gap-2 transition-transform hover:scale-105 active:scale-95"
            title="ç·Šæ€¥æ±‚åŠ© / Emergency"
        >
            <AlertTriangle size={24}/>
            <span className="font-bold pr-1 text-sm">{label}</span>
        </button>
    );

    const SectionHeader = ({ icon: Icon, title, subtitle }) => (
        <div className="mb-10 text-center animate-fade-in">
            <div className="inline-flex p-3 bg-emerald-100 rounded-xl mb-4">
                <Icon className="w-8 h-8 text-emerald-700" />
            </div>
            <h2 className="text-3xl font-extrabold text-slate-800 mb-2">{title}</h2>
            <p className="text-slate-500 text-lg max-w-2xl mx-auto">{subtitle}</p>
        </div>
    );

    const ActionButton = ({ children, onClick, variant = "primary", className = "" }) => {
        const variants = {
            primary: "bg-emerald-600 text-white hover:bg-emerald-700 shadow-md",
            secondary: "bg-white text-slate-700 border border-slate-200 hover:bg-slate-50 shadow-sm",
            outline: "border-2 border-emerald-600 text-emerald-600 hover:bg-emerald-50"
        };
        return (
            <button
                className={`px-6 py-3 rounded-xl font-bold transition-all transform active:scale-95 flex items-center justify-center gap-2 ${variants[variant]} ${className}`}
                onClick={onClick}
            >
                {children}
            </button>
        );
    };

    const EmergencyCard = ({ data, type, lang }) => {
        const isHeat = type === 'heat';
        const theme = isHeat
            ? { bg: 'bg-orange-50', border: 'border-orange-500', text: 'text-orange-600', sub: 'text-orange-800' }
            : { bg: 'bg-red-50', border: 'border-red-600', text: 'text-red-600', sub: 'text-red-800' };

        const title = isHeat ? lang.redCard.heatTitle : lang.redCard.pestTitle;
        const subtitle = isHeat ? lang.redCard.heatSub : lang.redCard.pestSub;

        return (
            <div className={`rounded-2xl bg-white border-l-8 ${theme.border} shadow-lg overflow-hidden`}>
                <div className={`${theme.bg} p-6 border-b border-white/50 flex justify-between items-start`}>
                    <div>
                        <div className={`flex itemsä¸­å¿ƒ gap-2 mb-1 font-bold ${theme.text} uppercase text-sm tracking-wider`}>
                            <AlertTriangle size={18}/> {data.level}
                        </div>
                        <h3 className="text-2xl font-extrabold text-slate-800">{title}</h3>
                        <p className={`${theme.sub} mt-1 font-medium`}>{subtitle}</p>
                    </div>
                    <Phone className={`${theme.text} opacity-20`} size={40} />
                </div>

                <div className="p-6 grid md:grid-cols-2 gap-8">
                    <div>
                        <h4 className="font-bold text-slate-700 mb-4 flex items-center gap-2">
                            <Activity size={18} className="text-slate-400"/> å±éšªå¾µå…† (Symptoms)
                        </h4>
                        <ul className="space-y-3">
                            {data.symptoms.map((sym, i) => (
                                <li key={i} className="flex items-center gap-3 bg-slate-50 p-3 rounded-xl border border-slate-100">
                                    <span className="text-2xl">{sym.icon}</span>
                                    <span className="font-bold text-slate-700">{sym.text}</span>
                                </li>
                            ))}
                        </ul>
                    </div>

                    <div>
                        <h4 className="font-bold text-slate-700 mb-4 flex items-center gap-2">
                            <Shield size={18} className="text-slate-400"/> é¦¬ä¸Šé€™æ¨£åšï¼(Action)
                        </h4>
                        <div className="grid grid-cols-2 gap-3">
                            {data.actions.map((act, i) => (
                                <div
                                    key={i}
                                    className={`${theme.bg} p-3 rounded-xl flex flex-col items-center text-center border border-white/50`}
                                >
                                    <div className={`mb-2 p-2 bg-white rounded-full ${theme.text} shadow-sm`}>{act.icon}</div>
                                    <span className="font-bold text-slate-900 block mb-1">{act.step}</span>
                                    <span className="text-xs text-slate-600 leading-tight">{act.desc}</span>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            </div>
        );
    };

    const Accordion = ({ category, question, answer }) => {
        const [isOpen, setIsOpen] = useState(false);
        return (
            <div className="border border-slate-100 bg-white rounded-xl mb-3 overflow-hidden shadow-sm hover:shadow-md transition-shadow">
                <button
                    className="w-full py-4 px-6 flex justify-between items-center text-left focus:outline-none hover:bg-slate-50"
                    onClick={() => setIsOpen(!isOpen)}
                >
                    <div>
                        <Badge color="blue">{category}</Badge>
                        <div className="font-bold text-lg text-slate-800 mt-2">{question}</div>
                    </div>
                    {isOpen ? <ChevronUp className="text-emerald-600" /> : <ChevronDown className="text-slate-400" />}
                </button>
                {isOpen && (
                    <div className="px-6 pb-6 text-slate-600 leading-relaxed border-t border-slate-50 pt-4 bg-slate-50/50">
                        {answer}
                    </div>
                )}
            </div>
        );
    };

    // --- é€€ä¼‘è©¦ç®—ç›¸é—œå…ƒä»¶ ---

    const InputGroup = ({ label, name, value, onChange }) => (
        <div>
            <label className="label-text">{label}</label>
            <input
                type="number"
                name={name}
                value={value}
                onChange={onChange}
                className="input-field"
            />
        </div>
    );

    const ResultCard = ({ title, icon, total, children, isWinner, viewMode }) => (
        <div className="bg-white p-6 rounded-xl border shadow-sm hover:shadow-md transition-all relative overflow-hidden group">
            <div className="absolute top-0 right-0 p-6 opacity-5 group-hover:opacity-10 transition-opacity transform scale-150 origin-top-right">
                {icon}
            </div>
            <div className="flex justify-between items-start mb-2 relative z-10">
                <h4 className="text-slate-500 text-sm font-bold flex items-center gap-2">
                    {icon} {title}
                </h4>
                {isWinner && (
                    <span className="bg-emerald-100 text-emerald-700 text-[10px] font-bold px-2 py-1 rounded-full">
                        ç›®å‰è¼ƒå„ª
                    </span>
                )}
            </div>
            <div className="text-3xl font-extrabold text-slate-800 relative z-10">
                ${Math.round(total).toLocaleString()}
                <span className="text-sm font-normal text-slate-400">
                    /{viewMode === 'monthly' ? 'æœˆ' : 'ç¸½é¡'}
                </span>
            </div>
            <div className="mt-4 relative z-10">{children}</div>
        </div>
    );

    const ResultRow = ({ label, value, color = "text-slate-700" }) => (
        <div className="flex justify-between items-center text-sm">
            <span className="text-slate-500">{label}</span>
            <span className={`font-medium ${color}`}>${Math.round(value).toLocaleString()}</span>
        </div>
    );

    const DetailCard = ({ title, children }) => (
        <div className="bg-white p-4 rounded-lg border border-slate-200 shadow-sm h-full">
            <div className="font-bold text-slate-700 mb-3 border-b border-slate-100 pb-2">
                {title}
            </div>
            {children}
        </div>
    );

    const BreakdownCard = ({ title, monthly, totalFund, items, divisor, info }) => (
        <div className="bg-white p-4 rounded-lg border border-slate-200 shadow-sm h-full">
            <div className="flex justify-between items-start mb-3 border-b border-slate-100 pb-2">
                <div className="font-bold text-slate-700">{title}</div>
                <div className="text-right">
                    <div className="text-lg font-bold text-slate-800">
                        ${Math.round(monthly).toLocaleString()}
                    </div>
                    <div className="text-[10px] text-slate-400">/æœˆ</div>
                </div>
            </div>
            <div className="space-y-2 text-xs mb-3">
                {items.map((item, idx) => (
                    <div key={idx} className="flex justify-between">
                        <span className="text-slate-500">{item.label}</span>
                        <span className={`font-medium ${item.color}`}>
                            ${item.value.toLocaleString()}
                        </span>
                    </div>
                ))}
                <div className="flex justify-between border-t border-slate-100 pt-2 mt-2">
                    <span className="font-bold text-slate-700">ç´¯ç©ç¸½é¡</span>
                    <span className="font-bold text-slate-800">
                        ${totalFund.toLocaleString()}
                    </span>
                </div>
                {info && (
                    <div className="mt-2 text-[10px] text-blue-600 bg-blue-50 p-1 rounded">
                        {info}
                    </div>
                )}
            </div>
            <div className="bg-slate-50 p-2 rounded text-[10px] text-slate-400 text-center">
                ç¸½é¡ Ã· {divisor} å€‹æœˆ = æœˆé ˜é‡‘é¡
            </div>
        </div>
    );

    const CalculatorPage = () => {
        // ä¸€äº›ç°¡åŒ–å¾Œçš„å¸¸æ•¸ï¼ˆéæ­£å¼æ³•æ¢ç²¾ç®—ï¼‰
        const CONSTANTS = {
            BASIC_WAGE_2025: 28590,
            OLD_FARMER_ALLOWANCE: 8110,
            LABOR_INS_MAX: 45800,
            LABOR_PENSION_MAX: 150000,
            LABOR_INS_RATE: 0.0155,
            LIFE_EXPECTANCY: 20, // é ä¼°é€€ä¼‘å¾Œé ˜ 20 å¹´
            NORMAL_RETIRE_AGE: 65
        };

        const [inputs, setInputs] = useState({
            currentAge: 35,
            laborStartAge: 25,
            laborRetireAge: 65,
            switchAge: 45,
            farmerRetireAge: 65,
            currentSalary: 55000,
            laborSelfRate: 0,
            farmerRate: 10,
            roiEstimate: 2,
            salaryGrowth: 2
        });

        const [results, setResults] = useState(null);
        const [showDetails, setShowDetails] = useState(false);
        const [viewMode, setViewMode] = useState('monthly');
        const [validationErrors, setValidationErrors] = useState([]);

        const getNum = (val) =>
            val === '' || val === undefined || val === null ? 0 : Number(val);

        const calculateRetirement = () => {
            const currentAge = getNum(inputs.currentAge);
            const laborRetireAge = getNum(inputs.laborRetireAge);
            const farmerRetireAge = getNum(inputs.farmerRetireAge);
            const switchAge = getNum(inputs.switchAge);
            const currentSalary = getNum(inputs.currentSalary);
            const laborStartAge = getNum(inputs.laborStartAge);
            const laborSelfRate = getNum(inputs.laborSelfRate);
            const farmerRate = getNum(inputs.farmerRate);
            const roiEstimate = getNum(inputs.roiEstimate);
            const salaryGrowth = getNum(inputs.salaryGrowth);

            const roi = roiEstimate / 100;
            const growth = salaryGrowth / 100;

            const errors = [];
            if (laborStartAge >= currentAge) {
                errors.push("ã€Œé–‹å§‹å·¥ä½œå¹´é½¡ã€å¿…é ˆå°æ–¼ã€Œç›®å‰å¹´é½¡ã€ã€‚");
            }
            if (switchAge < currentAge) {
                errors.push("ã€Œè½‰è·å¹´é½¡ã€é€šå¸¸æ‡‰å¤§æ–¼æˆ–ç­‰æ–¼ç›®å‰å¹´é½¡ã€‚è‹¥å·²è½‰è·ï¼Œå¯å°‡è½‰è·å¹´é½¡æ”¹æˆç›®å‰å¹´é½¡ã€‚");
            }
            if (switchAge < laborStartAge) {
                errors.push("ã€Œè½‰è·å¹´é½¡ã€ä¸èƒ½æ—©æ–¼ã€Œé–‹å§‹å·¥ä½œå¹´é½¡ã€ã€‚");
            }
            if (laborRetireAge <= currentAge) {
                errors.push("å‹å·¥ã€Œé è¨ˆé€€ä¼‘å¹´é½¡ã€å¿…é ˆå¤§æ–¼ã€Œç›®å‰å¹´é½¡ã€ã€‚");
            }
            if (farmerRetireAge <= switchAge) {
                errors.push("è¾²æ°‘ã€Œé è¨ˆé€€ä¼‘å¹´é½¡ã€å¿…é ˆå¤§æ–¼ã€Œè½‰è·å¹´é½¡ã€ã€‚");
            }
            if (laborRetireAge < 60) {
                errors.push("å‹ä¿å¹´é‡‘æ³•å®šè«‹é ˜å¹´é½¡æœ€ä½ç‚º 60 æ­²ï¼ˆæ­¤è™•åƒ…ç²—ç•¥æé†’ï¼‰ã€‚");
            }

            setValidationErrors(errors);
            if (errors.length > 0) {
                setResults(null);
                return;
            }

            const monthsToDistribute = CONSTANTS.LIFE_EXPECTANCY * 12;

            // ---- æ–¹æ¡ˆAï¼šä¸€è·¯ç•¶å‹å·¥ ----
            const yearsToLaborRetire = Math.max(0, laborRetireAge - currentAge);
            const totalLaborYears = Math.max(0, laborRetireAge - laborStartAge);

            let projectedFinalSalary =
                currentSalary * Math.pow(1 + growth, yearsToLaborRetire);
            let laborInsSalary = Math.min(
                projectedFinalSalary,
                CONSTANTS.LABOR_INS_MAX
            );
            if (currentSalary >= CONSTANTS.LABOR_INS_MAX) {
                laborInsSalary = CONSTANTS.LABOR_INS_MAX;
            }

            let laborInsRateAdjustment = 1;
            const ageDiff = laborRetireAge - CONSTANTS.NORMAL_RETIRE_AGE;
            if (ageDiff < 0) {
                laborInsRateAdjustment =
                    1 - Math.min(Math.abs(ageDiff), 5) * 0.04;
            } else if (ageDiff > 0) {
                laborInsRateAdjustment =
                    1 + Math.min(ageDiff, 5) * 0.04;
            }

            const laborInsAnnuity =
                laborInsSalary *
                totalLaborYears *
                CONSTANTS.LABOR_INS_RATE *
                laborInsRateAdjustment;
            const totalAsset_LaborIns = laborInsAnnuity * monthsToDistribute;

            // å‹é€€ï¼ˆé›‡ä¸»6% + è‡ªæï¼‰
            let lpAcc_Emp = 0;
            let lpAcc_Self = 0;
            let lpPrincipal_Emp = 0;
            let lpPrincipal_Self = 0;
            let currentSalarySim = currentSalary;
            for (let i = 0; i < yearsToLaborRetire; i++) {
                const pensionSalary = Math.min(
                    currentSalarySim,
                    CONSTANTS.LABOR_PENSION_MAX
                );
                const empYear = pensionSalary * 0.06 * 12;
                const selfYear = pensionSalary * (laborSelfRate / 100) * 12;

                lpPrincipal_Emp += empYear;
                lpPrincipal_Self += selfYear;
                lpAcc_Emp = (lpAcc_Emp + empYear) * (1 + roi);
                lpAcc_Self = (lpAcc_Self + selfYear) * (1 + roi);

                currentSalarySim *= 1 + growth;
            }

            const laborPensionMonthly_Emp = lpAcc_Emp / monthsToDistribute;
            const laborPensionMonthly_Self = lpAcc_Self / monthsToDistribute;

            const totalMonthlyLabor =
                laborInsAnnuity +
                laborPensionMonthly_Emp +
                laborPensionMonthly_Self;

            // ä¸€æ¬¡é ˜å‹ä¿ï¼ˆéå¸¸ç²—ç•¥ï¼‰
            let lumpSumUnits =
                totalLaborYears <= 15
                    ? totalLaborYears
                    : 15 + (totalLaborYears - 15) * 2;
            if (lumpSumUnits > 45) lumpSumUnits = 45;
            const lumpSum_LaborIns = laborInsSalary * lumpSumUnits;

            // ---- æ–¹æ¡ˆBï¼šä¸­é€”è½‰è¾²æ°‘ ----
            const yearsUntilSwitch = Math.max(0, switchAge - currentAge);
            const yearsAsFarmer = Math.max(0, farmerRetireAge - switchAge);

            // è½‰è·å‰å·²ç´¯ç©çš„å‹é€€å°ˆæˆ¶ï¼Œä¹‹å¾Œç¹¼çºŒæ»¾åˆ©æ¯
            let oldLpAcc_Emp = 0;
            let oldLpAcc_Self = 0;
            let oldLpPrin_Emp = 0;
            let oldLpPrin_Self = 0;
            let tempSalary = currentSalary;
            for (let i = 0; i < yearsUntilSwitch; i++) {
                const pensionSalary = Math.min(
                    tempSalary,
                    CONSTANTS.LABOR_PENSION_MAX
                );
                const empYear = pensionSalary * 0.06 * 12;
                const selfYear = pensionSalary * (laborSelfRate / 100) * 12;

                oldLpPrin_Emp += empYear;
                oldLpPrin_Self += selfYear;
                oldLpAcc_Emp = (oldLpAcc_Emp + empYear) * (1 + roi);
                oldLpAcc_Self = (oldLpAcc_Self + selfYear) * (1 + roi);

                tempSalary *= 1 + growth;
            }
            const yearsToCompoundOldLP = Math.max(
                0,
                farmerRetireAge - switchAge
            );
            oldLpAcc_Emp *= Math.pow(1 + roi, yearsToCompoundOldLP);
            oldLpAcc_Self *= Math.pow(1 + roi, yearsToCompoundOldLP);

            const farmer_LP_Monthly_Emp = oldLpAcc_Emp / monthsToDistribute;
            const farmer_LP_Monthly_Self = oldLpAcc_Self / monthsToDistribute;

            // è¾²æ°‘é€€ä¼‘å„²é‡‘ï¼ˆè¶…ç°¡åŒ–ï¼‰
            let farmerPensionAccumulated = 0;
            let farmerPrincipalUser = 0;
            let farmerPrincipalGov = 0;
            let basicWageSim = CONSTANTS.BASIC_WAGE_2025;
            for (let i = 0; i < yearsAsFarmer; i++) {
                const monthlyContributionUser = basicWageSim * (farmerRate / 100);
                const yearUser = monthlyContributionUser * 12;
                const yearGov = monthlyContributionUser * 12;
                farmerPrincipalUser += yearUser;
                farmerPrincipalGov += yearGov;
                farmerPensionAccumulated =
                    (farmerPensionAccumulated + (yearUser + yearGov)) * (1 + roi);
                basicWageSim *= 1 + growth;
            }
            const farmerPensionMonthly =
                farmerPensionAccumulated / monthsToDistribute;

            // åº•å±¤ä¿éšœï¼šè€è¾²æ´¥è²¼ or å‹ä¿å¹´é‡‘å…¶ä¸€è¼ƒé«˜ï¼ˆéå¸¸ç²—ç•¥ï¼‰
            const yearsAsFarmerForAllowance = yearsAsFarmer;
            const eligibleForOldFarmer =
                farmerRetireAge >= 65 && yearsAsFarmerForAllowance >= 15;
            const oldFarmerAmount = eligibleForOldFarmer
                ? CONSTANTS.OLD_FARMER_ALLOWANCE
                : 0;

            const laborYearsAtSwitch = Math.max(0, switchAge - laborStartAge);
            let laborInsSalaryAtSwitch = Math.min(
                tempSalary,
                CONSTANTS.LABOR_INS_MAX
            );
            if (currentSalary >= CONSTANTS.LABOR_INS_MAX) {
                laborInsSalaryAtSwitch = CONSTANTS.LABOR_INS_MAX;
            }

            let switchLaborRateAdj = 1;
            const ageDiffSwitch = farmerRetireAge - CONSTANTS.NORMAL_RETIRE_AGE;
            if (ageDiffSwitch < 0) {
                switchLaborRateAdj =
                    1 - Math.min(Math.abs(ageDiffSwitch), 5) * 0.04;
            } else if (ageDiffSwitch > 0) {
                switchLaborRateAdj =
                    1 + Math.min(ageDiffSwitch, 5) * 0.04;
            }

            const laborAnnuityAtSwitch =
                laborYearsAtSwitch >= 15
                    ? laborInsSalaryAtSwitch *
                      laborYearsAtSwitch *
                      CONSTANTS.LABOR_INS_RATE *
                      switchLaborRateAdj
                    : 0;

            let baseLayer = 0;
            let baseLayerName = "";
            if (laborAnnuityAtSwitch > oldFarmerAmount) {
                baseLayer = laborAnnuityAtSwitch;
                baseLayerName = "å‹ä¿å¹´é‡‘ï¼ˆä¿ç•™å¹´è³‡ï¼‰";
            } else {
                baseLayer = oldFarmerAmount;
                baseLayerName = "è€è¾²æ´¥è²¼";
            }
            const totalAsset_BaseLayer = baseLayer * monthsToDistribute;

            const totalMonthlyFarmer =
                baseLayer +
                farmer_LP_Monthly_Emp +
                farmer_LP_Monthly_Self +
                farmerPensionMonthly;

            setResults({
                laborPath: {
                    laborInsAnnuity,
                    laborPensionMonthly_Emp,
                    laborPensionMonthly_Self,
                    totalMonthly: totalMonthlyLabor,
                    totalAsset_LaborIns,
                    totalAsset_LaborPension_Emp: lpAcc_Emp,
                    totalAsset_LaborPension_Self: lpAcc_Self,
                    lumpSum_LaborIns
                },
                farmerPath: {
                    baseLayer,
                    baseLayerName,
                    laborPensionMonthly_Emp: farmer_LP_Monthly_Emp,
                    laborPensionMonthly_Self: farmer_LP_Monthly_Self,
                    farmerPensionMonthly,
                    totalMonthly: totalMonthlyFarmer,
                    totalAsset_BaseLayer,
                    totalAsset_LaborPension_Emp: oldLpAcc_Emp,
                    totalAsset_LaborPension_Self: oldLpAcc_Self,
                    totalAsset_FarmerPension: farmerPensionAccumulated
                },
                meta: {
                    monthsToDistribute
                }
            });
        };

        useEffect(() => {
            calculateRetirement();
            // eslint-disable-next-line react-hooks/exhaustive-deps
        }, [inputs]);

        const handleInputChange = (e) => {
            const { name, value } = e.target;
            setInputs((prev) => ({
                ...prev,
                [name]: value === '' ? '' : value
            }));
        };

        const getChartData = () => {
            if (!results) return [];
            const { laborPath, farmerPath } = results;
            if (viewMode === 'monthly') {
                return [
                    {
                        name: 'çºŒç•¶å‹å·¥',
                        'å‹ä¿å¹´é‡‘/è€è¾²æ´¥è²¼': Math.round(laborPath.laborInsAnnuity),
                        'å‹é€€(é›‡ä¸»)': Math.round(laborPath.laborPensionMonthly_Emp),
                        'å‹é€€(è‡ªæ)': Math.round(
                            laborPath.laborPensionMonthly_Self
                        ),
                        'è¾²æ°‘å„²é‡‘': 0
                    },
                    {
                        name: 'è½‰è·å‹™è¾²',
                        'å‹ä¿å¹´é‡‘/è€è¾²æ´¥è²¼': Math.round(
                            farmerPath.baseLayer
                        ),
                        'å‹é€€(é›‡ä¸»)': Math.round(
                            farmerPath.laborPensionMonthly_Emp
                        ),
                        'å‹é€€(è‡ªæ)': Math.round(
                            farmerPath.laborPensionMonthly_Self
                        ),
                        'è¾²æ°‘å„²é‡‘': Math.round(
                            farmerPath.farmerPensionMonthly
                        )
                    }
                ];
            } else {
                return [
                    {
                        name: 'çºŒç•¶å‹å·¥ (ç¸½è³‡ç”¢)',
                        'å‹ä¿å¹´é‡‘/è€è¾²æ´¥è²¼': Math.round(
                            laborPath.totalAsset_LaborIns
                        ),
                        'å‹é€€(é›‡ä¸»)': Math.round(
                            laborPath.totalAsset_LaborPension_Emp
                        ),
                        'å‹é€€(è‡ªæ)': Math.round(
                            laborPath.totalAsset_LaborPension_Self
                        ),
                        'è¾²æ°‘å„²é‡‘': 0
                    },
                    {
                        name: 'è½‰è·å‹™è¾² (ç¸½è³‡ç”¢)',
                        'å‹ä¿å¹´é‡‘/è€è¾²æ´¥è²¼': Math.round(
                            farmerPath.totalAsset_BaseLayer
                        ),
                        'å‹é€€(é›‡ä¸»)': Math.round(
                            farmerPath.totalAsset_LaborPension_Emp
                        ),
                        'å‹é€€(è‡ªæ)': Math.round(
                            farmerPath.totalAsset_LaborPension_Self
                        ),
                        'è¾²æ°‘å„²é‡‘': Math.round(
                            farmerPath.totalAsset_FarmerPension
                        )
                    }
                ];
            }
        };

        const chartData = getChartData();

        let isLaborBetter = false;
        let isFarmerBetter = false;
        if (results) {
            if (viewMode === 'monthly') {
                isLaborBetter =
                    results.laborPath.totalMonthly >
                    results.farmerPath.totalMonthly;
                isFarmerBetter =
                    results.farmerPath.totalMonthly >
                    results.laborPath.totalMonthly;
            } else {
                const totalLabor =
                    results.laborPath.totalAsset_LaborIns +
                    results.laborPath.totalAsset_LaborPension_Emp +
                    results.laborPath.totalAsset_LaborPension_Self;
                const totalFarmer =
                    results.farmerPath.totalAsset_BaseLayer +
                    results.farmerPath.totalAsset_LaborPension_Emp +
                    results.farmerPath.totalAsset_LaborPension_Self +
                    results.farmerPath.totalAsset_FarmerPension;
                isLaborBetter = totalLabor > totalFarmer;
                isFarmerBetter = totalFarmer > totalLabor;
            }
        }

        return (
            <div className="min-h-screen bg-gray-50 font-sans text-gray-800 pb-12 animate-fade-in">
                <div className="bg-slate-900 text-white pb-12 pt-8 px-4 shadow-lg">
                    <div className="max-w-6xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
                        <div>
                            <h1 className="text-3xl md:text-4xl font-extrabold flex items-center gap-3 tracking-tight">
                                <Calculator className="w-10 h-10 text-emerald-400" />
                                å‹è¾²è·æ¶¯è½‰æ›
                                <span className="text-emerald-400">
                                    é€€ä¼‘é‡‘ç²¾ç®— 4.0
                                </span>
                            </h1>
                            <p className="mt-3 text-slate-300 text-lg font-medium max-w-2xl">
                                ç²—ç•¥ä¼°ç®—ï¼šä¸€è·¯ç•¶å‹å·¥ vs ä¸­é€”è½‰è¾²æ°‘ï¼Œæœˆé ˜èˆ‡ç¸½é¡å¤§è‡´å·®ç•°ã€‚åƒ…ä¾›æ¦‚å¿µåƒè€ƒï¼Œéæ­£å¼æ³•å¾‹æ„è¦‹ã€‚
                            </p>
                        </div>
                    </div>
                </div>

                <div className="max-w-6xl mx-auto -mt-8 px-4">
                    {validationErrors.length > 0 && (
                        <div className="bg-white p-4 border-l-4 border-red-500 shadow-md rounded-r-lg mb-6">
                            <h3 className="font-bold text-red-700 flex items-center gap-2 mb-2">
                                <AlertTriangle className="w-5 h-5" />
                                åƒæ•¸æª¢æ ¸éŒ¯èª¤ï¼š
                            </h3>
                            <ul className="list-disc list-inside text-sm text-red-600 space-y-1">
                                {validationErrors.map((err, i) => (
                                    <li key={i}>{err}</li>
                                ))}
                            </ul>
                        </div>
                    )}

                    <div className="grid grid-cols-1 lg:grid-cols-12 gap-6">
                        {/* å·¦å´ï¼šåƒæ•¸è¨­å®š */}
                        <div className="lg:col-span-4 space-y-6">
                            {/* æŠ•è³‡å ±é…¬ & è–ªè³‡æˆé•· */}
                            <div className="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                                <div className="bg-slate-50 px-5 py-3 border-b border-slate-200 flex items-center gap-2">
                                    <Settings className="w-4 h-4 text-slate-500" />
                                    <h3 className="font-bold text-sm text-slate-700">
                                        å ±é…¬ç‡èˆ‡è–ªè³‡æˆé•·å‡è¨­
                                    </h3>
                                </div>
                                <div className="p-5 space-y-4">
                                    <div>
                                        <label className="label-text flex justify-between">
                                            <span>é ä¼°å¹´åŒ–å ±é…¬ç‡ï¼ˆ%ï¼‰</span>
                                            <span className="text-indigo-600 font-bold">
                                                {inputs.roiEstimate}%
                                            </span>
                                        </label>
                                        <input
                                            type="number"
                                            name="roiEstimate"
                                            value={inputs.roiEstimate}
                                            onChange={handleInputChange}
                                            className="input-field"
                                        />
                                        <p className="mt-1 text-[10px] text-slate-400">
                                            åªç”¨ä¾†ä¼°è¨ˆå‹é€€ã€è¾²é€€å¸³æˆ¶æ»¾åˆ©æ¯ï¼›éå¯¦éš›æŠ•è³‡å»ºè­°ã€‚
                                        </p>
                                    </div>
                                    <div>
                                        <label className="label-text flex justify-between">
                                            <span>é ä¼°è–ªè³‡å¹´æˆé•·ç‡ï¼ˆ%ï¼‰</span>
                                            <span className="text-blue-600 font-bold">
                                                {inputs.salaryGrowth}%
                                            </span>
                                        </label>
                                        <input
                                            type="number"
                                            name="salaryGrowth"
                                            value={inputs.salaryGrowth}
                                            onChange={handleInputChange}
                                            className="input-field"
                                        />
                                        <p className="mt-1 text-[10px] text-slate-400">
                                            åªå½±éŸ¿æœªä¾†è–ªè³‡æ¨ä¼°ï¼Œä¸æœƒçœŸçš„å¹«ä½ åŠ è–ªã€‚
                                        </p>
                                    </div>
                                </div>
                            </div>

                            {/* å‹å·¥ç”Ÿæ¶¯åƒæ•¸ */}
                            <div className="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                                <div className="bg-blue-50 px-5 py-3 border-b border-blue-100 flex items-center gap-2">
                                    <Briefcase className="w-4 h-4 text-blue-600" />
                                    <h3 className="font-bold text-sm text-slate-700">
                                        å‹å·¥ç”Ÿæ¶¯åƒæ•¸
                                    </h3>
                                </div>
                                <div className="p-5 space-y-4">
                                    <div className="grid grid-cols-2 gap-4">
                                        <InputGroup
                                            label="ç›®å‰å¹´é½¡"
                                            name="currentAge"
                                            value={inputs.currentAge}
                                            onChange={handleInputChange}
                                        />
                                        <InputGroup
                                            label="é–‹å§‹å·¥ä½œå¹´é½¡"
                                            name="laborStartAge"
                                            value={inputs.laborStartAge}
                                            onChange={handleInputChange}
                                        />
                                    </div>
                                    <div>
                                        <label className="label-text">
                                            ç›®å‰å¯¦éš›æœˆè–ªï¼ˆå…ƒï¼‰
                                        </label>
                                        <input
                                            type="number"
                                            name="currentSalary"
                                            value={inputs.currentSalary}
                                            onChange={handleInputChange}
                                            className="input-field"
                                        />
                                        <p className="mt-1 text-[10px] text-slate-400">
                                            ç”¨æ–¼ä¼°è¨ˆå‹ä¿æŠ•ä¿è–ªè³‡èˆ‡å‹é€€æç¹³é‡‘é¡ã€‚
                                        </p>
                                    </div>
                                </div>
                            </div>

                            {/* è½‰è·èˆ‡é€€ä¼‘å¹´é½¡ */}
                            <div className="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                                <div className="bg-orange-50 px-5 py-3 border-b border-orange-100 flex items-center gap-2">
                                    <ArrowRightLeft className="w-4 h-4 text-orange-600" />
                                    <h3 className="font-bold text-sm text-slate-700">
                                        è½‰è·èˆ‡é€€ä¼‘è¨­å®š
                                    </h3>
                                </div>
                                <div className="p-5 space-y-4">
                                    <div className="bg-orange-50/50 p-3 rounded-lg border border-orange-200">
                                        <label className="label-text text-orange-900">
                                            è½‰è·æˆå°ˆè·è¾²æ°‘çš„å¹´é½¡
                                        </label>
                                        <input
                                            type="number"
                                            name="switchAge"
                                            value={inputs.switchAge}
                                            onChange={handleInputChange}
                                            className="input-field"
                                        />
                                        <p className="mt-1 text-[10px] text-orange-700">
                                            è‹¥ä¸æ‰“ç®—è½‰è·ï¼Œå¯æŠŠã€Œè½‰è·å¹´é½¡ã€è¨­å®šæˆå’Œã€Œå‹å·¥é€€ä¼‘å¹´é½¡ã€ä¸€æ¨£ã€‚
                                        </p>
                                    </div>
                                    <div className="grid grid-cols-2 gap-4">
                                        <div>
                                            <label className="label-text text-blue-700">
                                                è‹¥çºŒç•¶å‹å·¥ï¼Œå¹¾æ­²é€€ä¼‘ï¼Ÿ
                                            </label>
                                            <input
                                                type="number"
                                                name="laborRetireAge"
                                                value={inputs.laborRetireAge}
                                                onChange={handleInputChange}
                                                className="input-field"
                                            />
                                        </div>
                                        <div>
                                            <label className="label-text text-emerald-700">
                                                è‹¥è½‰è¾²æ°‘ï¼Œå¹¾æ­²é€€ä¼‘ï¼Ÿ
                                            </label>
                                            <input
                                                type="number"
                                                name="farmerRetireAge"
                                                value={inputs.farmerRetireAge}
                                                onChange={handleInputChange}
                                                className="input-field"
                                            />
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* æç¹³ç‡è¨­å®š */}
                            <div className="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                                <div className="bg-emerald-50 px-5 py-3 border-b border-emerald-100 flex items-center gap-2">
                                    <Sprout className="w-4 h-4 text-emerald-600" />
                                    <h3 className="font-bold text-sm text-slate-700">
                                        å‹é€€è‡ªæ & è¾²æ°‘é€€ä¼‘å„²é‡‘
                                    </h3>
                                </div>
                                <div className="p-5 space-y-5">
                                    <div>
                                        <label className="label-text mb-1 flex justify-between">
                                            <span>è¾²é€€æç¹³ç‡ï¼ˆä»¥åŸºæœ¬å·¥è³‡è¨ˆç®—ï¼‰</span>
                                            <span className="font-bold text-emerald-600 text-lg">
                                                {inputs.farmerRate}%
                                            </span>
                                        </label>
                                        <input
                                            type="number"
                                            name="farmerRate"
                                            value={inputs.farmerRate}
                                            onChange={handleInputChange}
                                            className="input-field"
                                        />
                                        <p className="mt-1 text-[10px] text-slate-400">
                                            æ”¿åºœæœƒåŒé¡ææ’¥ï¼›å¯¦éš›ä¸Šæœ‰æ³•å®šç´šè·èˆ‡ä¸Šé™ï¼Œæ­¤è™•åƒ…ç‚ºæ¦‚å¿µç¤ºæ„ã€‚
                                        </p>
                                    </div>
                                    <div>
                                        <label className="label-text mb-1 flex justify-between">
                                            <span>å‹é€€è‡ªæç‡</span>
                                            <span className="font-bold text-purple-600 text-lg">
                                                {inputs.laborSelfRate}%
                                            </span>
                                        </label>
                                        <input
                                            type="number"
                                            name="laborSelfRate"
                                            value={inputs.laborSelfRate}
                                            onChange={handleInputChange}
                                            className="input-field"
                                        />
                                        <p className="mt-1 text-[10px] text-slate-400">
                                            0ï½6% ä¹‹é–“è¼ƒå¸¸è¦‹ï¼›æ­¤è™•åªä½œç‚ºä¼°ç®—ï¼Œè‡ªæè¶Šé«˜ï¼Œå¸³æˆ¶ç´¯ç©è¶Šå¤šã€‚
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* å³å´ï¼šçµæœèˆ‡æ¢åœ– */}
                        <div className="lg:col-span-8 space-y-6">
                            {results ? (
                                <>
                                    {/* A/B æ–¹æ¡ˆç¸½è¦½ */}
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <ResultCard
                                            title="æ–¹æ¡ˆ Aï¼šçºŒç•¶å‹å·¥"
                                            icon={<Briefcase className="w-6 h-6 text-blue-600" />}
                                            total={
                                                viewMode === 'monthly'
                                                    ? results.laborPath.totalMonthly
                                                    : results.laborPath.totalAsset_LaborIns +
                                                      results.laborPath.totalAsset_LaborPension_Emp +
                                                      results.laborPath.totalAsset_LaborPension_Self
                                            }
                                            isWinner={isLaborBetter}
                                            viewMode={viewMode}
                                        >
                                            <div className="space-y-3">
                                                <ResultRow
                                                    label="å‹ä¿å¹´é‡‘"
                                                    value={
                                                        viewMode === 'monthly'
                                                            ? results.laborPath.laborInsAnnuity
                                                            : results.laborPath.totalAsset_LaborIns
                                                    }
                                                />
                                                <ResultRow
                                                    label="å‹é€€ï¼ˆé›‡ä¸»6%ï¼‰"
                                                    value={
                                                        viewMode === 'monthly'
                                                            ? results.laborPath
                                                                  .laborPensionMonthly_Emp
                                                            : results.laborPath
                                                                  .totalAsset_LaborPension_Emp
                                                    }
                                                />
                                                <ResultRow
                                                    label="å‹é€€ï¼ˆè‡ªæï¼‰"
                                                    value={
                                                        viewMode === 'monthly'
                                                            ? results.laborPath
                                                                  .laborPensionMonthly_Self
                                                            : results.laborPath
                                                                  .totalAsset_LaborPension_Self
                                                    }
                                                />
                                            </div>
                                        </ResultCard>

                                        <ResultCard
                                            title="æ–¹æ¡ˆ Bï¼šè½‰è·å‹™è¾²"
                                            icon={<Sprout className="w-6 h-6 text-emerald-600" />}
                                            total={
                                                viewMode === 'monthly'
                                                    ? results.farmerPath.totalMonthly
                                                    : results.farmerPath.totalAsset_BaseLayer +
                                                      results.farmerPath.totalAsset_LaborPension_Emp +
                                                      results.farmerPath.totalAsset_LaborPension_Self +
                                                      results.farmerPath.totalAsset_FarmerPension
                                            }
                                            isWinner={isFarmerBetter}
                                            viewMode={viewMode}
                                        >
                                            <div className="space-y-3">
                                                <div className="flex justify-between items-center text-sm border-b border-dashed border-slate-200 pb-2">
                                                    <span className="text-slate-500">
                                                        åº•å±¤ä¿éšœ
                                                    </span>
                                                    <span className="font-medium text-slate-800">
                                                        {results.farmerPath.baseLayerName}ï¼š
                                                        $
                                                        {Math.round(
                                                            results.farmerPath.baseLayer
                                                        ).toLocaleString()}
                                                    </span>
                                                </div>
                                                <ResultRow
                                                    label="èˆŠå‹é€€æ»¾å­˜"
                                                    value={
                                                        viewMode === 'monthly'
                                                            ? results.farmerPath
                                                                  .laborPensionMonthly_Emp +
                                                              results.farmerPath
                                                                  .laborPensionMonthly_Self
                                                            : results.farmerPath
                                                                  .totalAsset_LaborPension_Emp +
                                                              results.farmerPath
                                                                  .totalAsset_LaborPension_Self
                                                    }
                                                />
                                                <ResultRow
                                                    label="è¾²æ°‘é€€ä¼‘å„²é‡‘"
                                                    value={
                                                        viewMode === 'monthly'
                                                            ? results.farmerPath
                                                                  .farmerPensionMonthly
                                                            : results.farmerPath
                                                                  .totalAsset_FarmerPension
                                                    }
                                                />
                                            </div>
                                        </ResultCard>
                                    </div>

                                    {/* æ¢åœ–å€ï¼šè‡ªç•«æ°´å¹³å †ç–Šæ¢ */}
                                    <div className="bg-white p-6 rounded-xl shadow-sm border border-slate-200 relative">
                                        <div className="flex justify-between items-center mb-4">
                                            <h4 className="font-bold text-slate-700 flex items-center gap-2">
                                                <TrendingUp className="w-5 h-5 text-emerald-500" />
                                                å…©æ¢è·¯ç·šçš„é€€ä¼‘ç¾é‡‘æµæ¯”è¼ƒ
                                            </h4>
                                            <div className="flex gap-2 items-center text-xs">
                                                <span className="text-slate-500">
                                                    é¡¯ç¤ºå–®ä½ï¼š
                                                </span>
                                                <button
                                                    className={`px-2 py-1 rounded-full border text-xs ${
                                                        viewMode === 'monthly'
                                                            ? 'bg-emerald-600 text-white border-emerald-600'
                                                            : 'bg-white text-slate-600 border-slate-200'
                                                    }`}
                                                    onClick={() =>
                                                        setViewMode('monthly')
                                                    }
                                                >
                                                    æœˆé ˜
                                                </button>
                                                <button
                                                    className={`px-2 py-1 rounded-full border text-xs ${
                                                        viewMode === 'total'
                                                            ? 'bg-emerald-600 text-white border-emerald-600'
                                                            : 'bg-white text-slate-600 border-slate-200'
                                                    }`}
                                                    onClick={() =>
                                                        setViewMode('total')
                                                    }
                                                >
                                                    é ä¼°ç¸½é¡
                                                </button>
                                            </div>
                                        </div>

                                        <div className="space-y-4">
                                            {chartData.map(row => {
                                                const total =
                                                    (row['å‹ä¿å¹´é‡‘/è€è¾²æ´¥è²¼'] || 0) +
                                                    (row['å‹é€€(é›‡ä¸»)'] || 0) +
                                                    (row['å‹é€€(è‡ªæ)'] || 0) +
                                                    (row['è¾²æ°‘å„²é‡‘'] || 0);

                                                const safeTotal = total || 1;

                                                const seg = {
                                                    base: (row['å‹ä¿å¹´é‡‘/è€è¾²æ´¥è²¼'] || 0) / safeTotal * 100,
                                                    emp: (row['å‹é€€(é›‡ä¸»)'] || 0) / safeTotal * 100,
                                                    self: (row['å‹é€€(è‡ªæ)'] || 0) / safeTotal * 100,
                                                    farmer: (row['è¾²æ°‘å„²é‡‘'] || 0) / safeTotal * 100,
                                                };

                                                return (
                                                    <div key={row.name} className="space-y-1">
                                                        <div className="flex justify-between text-xs text-slate-600">
                                                            <span>{row.name}</span>
                                                            <span className="font-mono">
                                                                {viewMode === 'monthly'
                                                                    ? `ç´„ $${total.toLocaleString()}/æœˆ`
                                                                    : `ç´„ $${(total / 1000000).toFixed(2)} ç™¾è¬`}
                                                            </span>
                                                        </div>
                                                        <div className="w-full h-6 rounded-full bg-slate-100 overflow-hidden flex">
                                                            {row['å‹ä¿å¹´é‡‘/è€è¾²æ´¥è²¼'] > 0 && (
                                                                <div
                                                                    className="h-full bg-blue-500"
                                                                    style={{ width: `${seg.base}%` }}
                                                                    title="å‹ä¿å¹´é‡‘/è€è¾²æ´¥è²¼"
                                                                />
                                                            )}
                                                            {row['å‹é€€(é›‡ä¸»)'] > 0 && (
                                                                <div
                                                                    className="h-full bg-blue-300"
                                                                    style={{ width: `${seg.emp}%` }}
                                                                    title="å‹é€€(é›‡ä¸»)"
                                                                />
                                                            )}
                                                            {row['å‹é€€(è‡ªæ)'] > 0 && (
                                                                <div
                                                                    className="h-full bg-purple-500"
                                                                    style={{ width: `${seg.self}%` }}
                                                                    title="å‹é€€(è‡ªæ)"
                                                                />
                                                            )}
                                                            {row['è¾²æ°‘å„²é‡‘'] > 0 && (
                                                                <div
                                                                    className="h-full bg-emerald-500"
                                                                    style={{ width: `${seg.farmer}%` }}
                                                                    title="è¾²æ°‘å„²é‡‘"
                                                                />
                                                            )}
                                                        </div>
                                                        <div className="flex justify-between text-[10px] text-slate-400">
                                                            <span className="flex items-center gap-1">
                                                                <span className="w-2 h-2 bg-blue-500 rounded-sm" /> å‹ä¿/è€è¾²
                                                            </span>
                                                            <span className="flex items-center gap-1">
                                                                <span className="w-2 h-2 bg-blue-300 rounded-sm" /> å‹é€€(é›‡ä¸»)
                                                            </span>
                                                            <span className="flex items-center gap-1">
                                                                <span className="w-2 h-2 bg-purple-500 rounded-sm" /> å‹é€€(è‡ªæ)
                                                            </span>
                                                            <span className="flex items-center gap-1">
                                                                <span className="w-2 h-2 bg-emerald-500 rounded-sm" /> è¾²æ°‘å„²é‡‘
                                                            </span>
                                                        </div>
                                                    </div>
                                                );
                                            })}
                                        </div>
                                    </div>

                                    {/* ä¸€æ¬¡é ˜å€å¡Šï¼ˆæ¦‚å¿µå±•ç¤ºï¼‰ */}
                                    <div className="bg-gradient-to-br from-slate-50 to-white p-6 rounded-xl shadow-sm border border-slate-200">
                                        <h4 className="font-bold text-slate-800 mb-4 flex items-center gap-2 text-lg">
                                            <Coins className="w-6 h-6 text-yellow-500" />
                                            å¦‚æœé¸æ“‡ã€Œä¸€æ¬¡é ˜ã€çš„å¤§è‡´è¦æ¨¡
                                        </h4>
                                        <div className="grid md:grid-cols-2 gap-6">
                                            <div className="bg-white p-4 rounded-lg border border-slate-200 shadow-sm">
                                                <div className="flex justify-between items-start mb-2">
                                                    <div className="font-bold text-slate-700">
                                                        å‹ä¿è€å¹´çµ¦ä»˜ï¼ˆèˆŠåˆ¶é¡æ¯”ï¼‰
                                                    </div>
                                                    <span className="text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded-full">
                                                        ç²—ç•¥ä¼°ç®—
                                                    </span>
                                                </div>
                                                <div className="text-2xl font-bold text-slate-800 mb-1">
                                                    $
                                                    {Math.round(
                                                        results.laborPath
                                                            .lumpSum_LaborIns
                                                    ).toLocaleString()}
                                                </div>
                                                <div className="text-xs text-slate-500 mb-3">
                                                    åƒ…ä»¥å¹´è³‡èˆ‡æŠ•ä¿è–ªè³‡åšéå¸¸ç²—ç•¥æ¨ä¼°ï¼Œå¯¦éš›çµ¦ä»˜éœ€ä¾å‹ä¿æ¢ä¾‹è¨ˆç®—ã€‚
                                                </div>
                                            </div>
                                            <div className="bg-white p-4 rounded-lg border border-slate-200 shadow-sm">
                                                <div className="flex justify-between items-start mb-2">
                                                    <div className="font-bold text-slate-700">
                                                        å‹é€€å°ˆæˆ¶çµæ¸…ï¼ˆé›‡ä¸»ï¼‹è‡ªæï¼‰
                                                    </div>
                                                    <span className="text-xs bg-purple-50 text-purple-700 px-2 py-1 rounded-full">
                                                        ç²—ç•¥ä¼°ç®—
                                                    </span>
                                                </div>
                                                <div className="text-2xl font-bold text-slate-800 mb-1">
                                                    $
                                                    {Math.round(
                                                        results.laborPath
                                                            .totalAsset_LaborPension_Emp +
                                                            results.laborPath
                                                                .totalAsset_LaborPension_Self
                                                    ).toLocaleString()}
                                                </div>
                                                <div className="text-xs text-slate-500 mb-3">
                                                    å¸³æˆ¶å¯¦éš›ç´¯ç©æœ¬é‡‘åŠ ä¸Šå‡è¨­åˆ©æ¯ï¼›å¯¦éš›æ•¸å­—ä»¥å‹ä¿å±€å€‹äººå¸³æˆ¶ç‚ºæº–ã€‚
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    {/* è¨ˆç®—ç´°ç¯€å±•é–‹ */}
                                    <div className="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
                                        <button
                                            onClick={() => setShowDetails(!showDetails)}
                                            className="w-full flex items-center justify-between p-5 bg-slate-50 hover:bg-slate-100 transition-colors"
                                        >
                                            <span className="font-bold text-slate-700 flex items-center gap-2">
                                                <Info className="w-4 h-4 text-slate-500" />
                                                æŸ¥çœ‹è¨ˆç®—å‡è¨­èˆ‡æ‹†è§£
                                            </span>
                                            <span className="text-xs text-slate-500 flex items-center gap-1">
                                                {showDetails ? 'æ”¶åˆ' : 'å±•é–‹'}
                                                {showDetails ? (
                                                    <ChevronUp size={14} />
                                                ) : (
                                                    <ChevronDown size={14} />
                                                )}
                                            </span>
                                        </button>
                                        {showDetails && (
                                            <div className="p-6 space-y-8 text-sm">
                                                <div>
                                                    <SectionHeader
                                                        icon={Briefcase}
                                                        title="A. çºŒç•¶å‹å·¥è¨ˆç®—æ‹†è§£ï¼ˆç¤ºæ„ï¼‰"
                                                        subtitle="æ­¤è™•åªåšæ¦‚å¿µæ€§ä¼°ç®—ï¼Œå¹«ä½ çœ‹æ‡‚ã€Œçµæ§‹ã€ï¼Œä¸æ˜¯æ³•å¾‹ç²¾ç®—ã€‚"
                                                    />
                                                    <div className="grid md:grid-cols-2 gap-6 mt-4">
                                                        <DetailCard title="å‹ä¿å¹´é‡‘ï¼ˆç²—ç•¥ï¼‰">
                                                            <p className="text-slate-600 mb-2 text-xs leading-relaxed">
                                                                å‡è¨­ï¼šå¹³å‡æœˆæŠ•ä¿è–ªè³‡æ¥è¿‘ä½ é€€ä¼‘å‰è–ªè³‡ï¼Œä¸¦ä¹˜ä¸Šç´¯ç©å¹´è³‡èˆ‡ä¸€å€‹å›ºå®šæ¯”ä¾‹ï¼ˆ1.55%ï¼‰ï¼Œå†ä¾æå‰ï¼å»¶å¾Œé€€ä¼‘ç¨ä½œèª¿æ•´ã€‚
                                                            </p>
                                                            <p className="text-[10px] text-slate-400">
                                                                çœŸå¯¦ä¸–ç•Œä¸­ï¼Œå‹ä¿å¹´é‡‘æœƒä¾ã€Œé€å¹´æŠ•ä¿è–ªè³‡å¹³å‡ã€ã€ã€ŒåŠ è¨ˆçœ·å±¬ã€ã€ã€Œæœ€ä½ä¿éšœã€ç­‰æ¢ä»¶è¨ˆç®—ï¼Œè«‹ä»¥å‹ä¿å±€èªªæ˜ç‚ºä¸»ã€‚
                                                            </p>
                                                        </DetailCard>
                                                        <BreakdownCard
                                                            title="å‹é€€æ–°åˆ¶å°ˆæˆ¶"
                                                            monthly={
                                                                results.laborPath
                                                                    .laborPensionMonthly_Emp +
                                                                results.laborPath
                                                                    .laborPensionMonthly_Self
                                                            }
                                                            totalFund={
                                                                results.laborPath
                                                                    .totalAsset_LaborPension_Emp +
                                                                results.laborPath
                                                                    .totalAsset_LaborPension_Self
                                                            }
                                                            divisor={
                                                                results.meta
                                                                    .monthsToDistribute
                                                            }
                                                            items={[
                                                                {
                                                                    label: 'é›‡ä¸»ææ’¥ç´¯ç©',
                                                                    value: Math.round(
                                                                        results
                                                                            .laborPath
                                                                            .totalAsset_LaborPension_Emp
                                                                    ),
                                                                    color: 'text-blue-600'
                                                                },
                                                                {
                                                                    label: 'æœ¬äººè‡ªæç´¯ç©',
                                                                    value: Math.round(
                                                                        results
                                                                            .laborPath
                                                                            .totalAsset_LaborPension_Self
                                                                    ),
                                                                    color: 'text-purple-600'
                                                                }
                                                            ]}
                                                            info="æ­¤ç‚ºä¼°ç®—å¸³æˆ¶è¦æ¨¡ï¼Œå¯¦éš›é‡‘é¡è«‹ä»¥å‹ä¿å±€å‹é€€å€‹äººå°ˆæˆ¶ç‚ºæº–ã€‚"
                                                        />
                                                    </div>
                                                </div>

                                                <div className="border-t border-slate-100 pt-6">
                                                    <SectionHeader
                                                        icon={Sprout}
                                                        title="B. è½‰è·å‹™è¾²è¨ˆç®—æ‹†è§£ï¼ˆç¤ºæ„ï¼‰"
                                                        subtitle="ç•¶ä½ ä¸­é€”è½‰ç‚ºè¾²æ°‘æ™‚ï¼ŒèˆŠå‹é€€ç¹¼çºŒæ»¾åˆ©ç›Šï¼Œæ–°è¾²é€€èˆ‡è€è¾²æ´¥è²¼å‰‡ç–ŠåŠ ä¸Šä¾†ã€‚"
                                                    />
                                                    <div className="grid md:grid-cols-2 gap-6 mt-4">
                                                        <BreakdownCard
                                                            title="èˆŠå‹é€€æ»¾å­˜"
                                                            monthly={
                                                                results.farmerPath
                                                                    .laborPensionMonthly_Emp +
                                                                results.farmerPath
                                                                    .laborPensionMonthly_Self
                                                            }
                                                            totalFund={
                                                                results.farmerPath
                                                                    .totalAsset_LaborPension_Emp +
                                                                results.farmerPath
                                                                    .totalAsset_LaborPension_Self
                                                            }
                                                            divisor={
                                                                results.meta
                                                                    .monthsToDistribute
                                                            }
                                                            items={[
                                                                {
                                                                    label: 'é›‡ä¸»ææ’¥ç´¯ç©',
                                                                    value: Math.round(
                                                                        results
                                                                            .farmerPath
                                                                            .totalAsset_LaborPension_Emp
                                                                    ),
                                                                    color: 'text-blue-600'
                                                                },
                                                                {
                                                                    label: 'æœ¬äººè‡ªæç´¯ç©',
                                                                    value: Math.round(
                                                                        results
                                                                            .farmerPath
                                                                            .totalAsset_LaborPension_Self
                                                                    ),
                                                                    color: 'text-purple-600'
                                                                }
                                                            ]}
                                                            info="è½‰è·å¾Œä¸å†æ–°å¢ææ’¥ï¼Œä½†å¸³æˆ¶æŒçºŒæ»¾åˆ©æ¯ã€‚å¯¦å‹™ä¸Šä»ä»¥å‹ä¿å±€å¸³æˆ¶ç‚ºä¸»ã€‚"
                                                        />
                                                        <BreakdownCard
                                                            title="è¾²æ°‘é€€ä¼‘å„²é‡‘"
                                                            monthly={
                                                                results
                                                                    .farmerPath
                                                                    .farmerPensionMonthly
                                                            }
                                                            totalFund={
                                                                results
                                                                    .farmerPath
                                                                    .totalAsset_FarmerPension
                                                            }
                                                            divisor={
                                                                results.meta
                                                                    .monthsToDistribute
                                                            }
                                                            items={[
                                                                {
                                                                    label: 'è‡ªå·±æç¹³ï¼‹æ”¿åºœç›¸å°æç¹³',
                                                                    value: Math.round(
                                                                        results
                                                                            .farmerPath
                                                                            .totalAsset_FarmerPension
                                                                    ),
                                                                    color: 'text-emerald-600'
                                                                }
                                                            ]}
                                                            info="å¯¦éš›åˆ¶åº¦æœ‰çµ¦ä»˜æ¨™æº–èˆ‡å¹´é‡‘ç”Ÿå‘½è¡¨ï¼Œæ­¤è™•åƒ…ä»¥ã€Œæœ¬é‡‘ï¼‹åˆ©æ¯é™¤ä»¥20å¹´ã€åšæ¦‚ç•¥ç¤ºæ„ã€‚"
                                                        />
                                                    </div>
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                </>
                            ) : (
                                <div className="h-96 flex flex-col items-center justify-center text-slate-300 bg-slate-50 rounded-xl border border-dashed border-slate-200">
                                    <Calculator className="w-10 h-10 mb-3" />
                                    <p className="font-medium text-slate-500">
                                        è«‹å…ˆå¡«å¯«å·¦é‚Šçš„åŸºæœ¬è³‡æ–™ï¼Œæˆ‘æœƒå¹«ä½ ä¼°ä¸€ä¼°å…©æ¢è·¯ç·šçš„å·®ç•°ã€‚
                                    </p>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            </div>
        );
    };

    // --- å…¶ä»–é é¢ï¼ˆç°¡åŒ–ç‰ˆï¼Œç¶­æŒçµæ§‹ï¼‰ ---

    const HomePage = ({ setPage, lang, currentDate }) => (
        <div className="animate-fade-in pb-12">
            <div className="bg-emerald-900 text-white pt-24 pb-32 px-4 rounded-b-[2.5rem] shadow-xl relative overflow-hidden">
                <div className="max-w-7xl mx-auto relative z-10">
                    <div className="flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4">
                        <div>
                            <div className="inline-flex items-center gap-2 bg-emerald-800/50 backdrop-blur-md px-4 py-1.5 rounded-full text-emerald-100 text-sm font-medium border border-emerald-700/50 mb-4">
                                <MapPin size={14}/> å˜‰ç¾©ç¸£æ°‘é›„é„‰ | <Calendar size={14}/> {currentDate}
                            </div>
                            <h1 className="text-4xl md:text-6xl font-extrabold tracking-tight">
                                {lang.title}
                                <span className="text-emerald-400">{lang.subtitle}</span>
                            </h1>
                        </div>
                        <div className="bg-white/10 backdrop-blur-md border border-white/10 rounded-2xl p-4 w-full md:w-auto flex items-center gap-4 text-left shadow-lg">
                            <div className="bg-orange-500 p-3 rounded-xl text-white shadow-lg animate-pulse">
                                <Sun size={32} />
                            </div>
                            <div>
                                <h3 className="font-bold text-white text-lg">
                                    {lang.todayRisk}ï¼š{lang.high}
                                </h3>
                                <p className="text-emerald-100 text-sm opacity-80">
                                    11:00â€“14:00 ç›¡é‡é¿å…åœ¨çƒˆæ—¥ä¸‹å·¥ä½œã€‚
                                </p>
                            </div>
                        </div>
                    </div>
                    <p className="text-lg md:text-xl text-emerald-100/80 max-w-2xl font-light mb-10">
                        {lang.heroDesc}
                    </p>
                </div>
            </div>

            {/* èº«åˆ†å°è¦½å¡ç‰‡ */}
            <div className="max-w-7xl mx-auto px-4 -mt-20 relative z-20 mb-16">
                <div className="grid md:grid-cols-3 gap-6">
                    {[
                        {
                            title: lang.identity.new,
                            icon: <Sprout size={32}/>,
                            desc: "å¾é¢¨éšªèˆ‡çœŸå¯¦æ”¶å…¥é–‹å§‹ï¼Œå…ˆçœ‹æ¸…æ¥šå†æ±ºå®šã€‚",
                            color: "from-blue-500 to-blue-600",
                            page: "startFarming"
                        },
                        {
                            title: lang.identity.young,
                            icon: <Tractor size={32}/>,
                            desc: "æƒ³å…¼é¡§å®¶åº­èˆ‡æ”¶å…¥ï¼Ÿçœ‹çœå·¥æ©Ÿå…·èˆ‡è·å®‰ã€‚",
                            color: "from-emerald-500 to-emerald-600",
                            page: "greenhouse"
                        },
                        {
                            title: lang.identity.senior,
                            icon: <Heart size={32}/>,
                            desc: "ç— ç—›ã€è·ç½ã€çµ¦ä»˜ç”³è«‹ï¼Œä¸€æ¬¡æ•´ç†ã€‚",
                            color: "from-orange-500 to-orange-600",
                            page: "healthPromo"
                        }
                    ].map((item, i) => (
                        <div
                            key={i}
                            onClick={() => setPage(item.page)}
                            className="bg-white rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 cursor-pointer p-8 group border border-slate-100"
                        >
                            <div
                                className={`w-14 h-14 rounded-xl bg-gradient-to-br ${item.color} text-white flex items-center justify-center mb-6 shadow-md group-hover:scale-110 transition-transform`}
                            >
                                {item.icon}
                            </div>
                            <h3 className="text-2xl font-bold text-slate-800 mb-3">
                                {item.title}
                            </h3>
                            <p className="text-slate-500 mb-6 leading-relaxed">
                                {item.desc}
                            </p>
                            <div className="flex items-center text-sm font-bold text-emerald-600 group-hover:text-emerald-700">
                                {lang.identity.enter}
                                <ArrowRight
                                    size={16}
                                    className="ml-2 group-hover:translate-x-1 transition-transform"
                                />
                            </div>
                        </div>
                    ))}
                </div>
            </div>

            {/* è«–å£‡ + å½±éŸ³ç°¡åŒ–å€å¡Š */}
            <div className="max-w-7xl mx-auto px-4 grid lg:grid-cols-2 gap-8 mb-12">
                {/* è«–å£‡ */}
                <div className="bg-white rounded-3xl p-8 border border-slate-100 shadow-lg">
                    <div className="flex justify-between items-center mb-6 border-b border-slate-50 pb-4">
                        <h3 className="text-2xl font-bold text-slate-800 flex items-center gap-3">
                            <MessageCircle className="text-emerald-500" />
                            æœ€æ–°äº¤æµå‹•æ…‹
                        </h3>
                        <button
                            onClick={() => setPage('forum')}
                            className="text-sm text-emerald-600 hover:text-emerald-700 font-bold flex items-center gap-1"
                        >
                            å‰å¾€äº¤æµåœ’åœ°
                            <ArrowRight size={14} />
                        </button>
                    </div>
                    <div className="space-y-4">
                        {forumPosts.map((post) => (
                            <div
                                key={post.id}
                                className="flex gap-4 p-4 rounded-2xl bg-slate-50 hover:bg-blue-50/50 transition-colors cursor-pointer border border-transparent hover:border-blue-100 group"
                                onClick={() => setPage('forum')}
                            >
                                <div className="w-12 h-12 rounded-full bg-white border border-slate-100 flex items-center justify-center font-bold text-slate-500 flex-shrink-0 shadow-sm group-hover:text-blue-600">
                                    {post.avatar}
                                </div>
                                <div className="flex-grow">
                                    <div className="flex justify-between items-start">
                                        <h4 className="font-bold text-slate-800 line-clamp-1 group-hover:text-blue-700">
                                            {post.title}
                                        </h4>
                                        <span className="text-[10px] px-2 py-0.5 rounded-full bg-blue-50 text-blue-600 ml-2 whitespace-nowrap">
                                            {post.tag}
                                        </span>
                                    </div>
                                    <p className="text-xs text-slate-500 mt-1 line-clamp-2">
                                        {post.content}
                                    </p>
                                    <p className="text-[11px] text-slate-400 mt-2">
                                        by {post.author}
                                    </p>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>

                {/* å½±éŸ³ */}
                <div className="bg-slate-900 rounded-3xl p-8 shadow-lg text-white relative overflow-hidden">
                    <div className="absolute top-0 right-0 w-64 h-64 bg-emerald-500 rounded-full blur-[80px] opacity-20 -mr-16 -mt-16 pointer-events-none"></div>
                    <div className="relative z-10">
                        <div className="flex justify-between items-center mb-6 border-b border-white/10 pb-4">
                            <h3 className="text-2xl font-bold flex items-center gap-3">
                                <PlayCircle className="text-emerald-400" />
                                ç†±é–€å½±éŸ³æ¨è–¦
                            </h3>
                            <button
                                onClick={() => setPage('videos')}
                                className="text-sm text-emerald-100 hover:text-white font-bold flex items-center gap-1"
                            >
                                å…¨éƒ¨è§€çœ‹
                                <ArrowRight size={14} />
                            </button>
                        </div>
                        {videoData[0] && (
                            <div
                                className="bg-white/5 rounded-2xl p-4 mb-4 backdrop-blur-sm border border-white/10 cursor-pointer hover:bg-white/10 transition-colors group"
                                onClick={() => setPage('videos')}
                            >
                                <div className="flex gap-5">
                                    <div className="w-32 h-24 bg-black rounded-xl flex items-center justify-center flex-shrink-0 relative overflow-hidden border border-white/10">
                                        <img
                                            src={`https://img.youtube.com/vi/${videoData[0].youtubeId}/mqdefault.jpg`}
                                            alt="thumbnail"
                                            className="w-full h-full object-cover opacity-90 group-hover:opacity-100 transition-opacity"
                                        />
                                        <PlayCircle
                                            size={32}
                                            className="text-white absolute z-10 drop-shadow-md group-hover:scale-110 transition-transform"
                                        />
                                    </div>
                                    <div className="flex flex-col justify-center">
                                        <div className="mb-2">
                                            <Badge color="white">
                                                {videoData[0].type}
                                            </Badge>
                                        </div>
                                        <h4 className="font-bold text-lg mb-1 group-hover:text-emerald-200">
                                            {videoData[0].title}
                                        </h4>
                                        <p className="text-xs text-emerald-100/80 line-clamp-2">
                                            {videoData[0].desc}
                                        </p>
                                        <p className="text-[11px] text-emerald-100/60 mt-1">
                                            {videoData[0].views} æ¬¡è§€çœ‹ Â· {videoData[0].date}
                                        </p>
                                    </div>
                                </div>
                            </div>
                        )}
                        <div className="space-y-3">
                            {videoData.slice(1).map((video) => (
                                <div
                                    key={video.id}
                                    className="flex items-center gap-4 p-3 rounded-xl hover:bg-white/5 cursor-pointer text-slate-300 hover:text-white transition-colors border border-transparent hover:border-white/10"
                                    onClick={() => setPage('videos')}
                                >
                                    <div className="w-10 h-10 rounded-lg bg-black/50 overflow-hidden flex-shrink-0 border border-white/10">
                                        <img
                                            src={`https://img.youtube.com/vi/${video.youtubeId}/default.jpg`}
                                            alt="thumbnail"
                                            className="w-full h-full object-cover"
                                        />
                                    </div>
                                    <span className="font-medium truncate flex-grow text-sm md:text-base">
                                        {video.title}
                                    </span>
                                    <span className="text-xs opacity-50 whitespace-nowrap">
                                        {video.views}
                                    </span>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    );

    const SafetyPage = ({ lang }) => (
        <div className="max-w-4xl mx-auto px-4 py-12 animate-fade-in">
            <SectionHeader
                icon={Shield}
                title={lang.nav.safety}
                subtitle="ç™¼ç”Ÿäº‹æƒ…æ™‚ï¼Œä¸éœ€è¦æ€è€ƒå¤ªå¤šï¼Œè·Ÿè‘—åšå°±å°äº†ã€‚"
            />
            <div className="space-y-8">
                <EmergencyCard data={safetyData.heat} type="heat" lang={lang} />
                <EmergencyCard data={safetyData.pesticide} type="pesticide" lang={lang} />
                <div className="bg-yellow-50 border border-yellow-200 rounded-2xl p-4 text-xs text-yellow-800 mt-4 flex gap-2">
                    <AlertCircle className="w-4 h-4 mt-0.5" />
                    <p>
                        æœ¬é é¢åƒ…ä½œç‚ºè¡›æ•™èˆ‡æ•™è‚²ä½¿ç”¨ï¼Œå¯¦éš›ç·Šæ€¥æƒ…æ³è«‹ç«‹å³æ’¥æ‰“ 119 æˆ–å°±è¿‘å°‹æ±‚é†«ç™‚å”åŠ©ã€‚
                    </p>
                </div>
            </div>
        </div>
    );

    const EconomicsPage = () => (
        <div className="max-w-4xl mx-auto px-4 py-12 animate-fade-in">
            <SectionHeader
                icon={DollarSign}
                title="ä¿éšªèˆ‡ç¶“æ¿Ÿå®‰å…¨"
                subtitle="æŠŠè·ç½ã€é†«ç™‚ã€é€€ä¼‘æ‹†é–‹ä¾†çœ‹ï¼Œæ‰çŸ¥é“è‡ªå·±ç¼ºå“ªä¸€å¡Šã€‚"
            />
            <div className="space-y-4">
                {qaData.map((qa, idx) => (
                    <Accordion
                        key={idx}
                        category={qa.category}
                        question={qa.q}
                        answer={qa.a}
                    />
                ))}
                <p className="text-xs text-slate-400 mt-4">
                    â€» ä»¥ä¸Šå…§å®¹ç‚ºç°¡åŒ–èªªæ˜ï¼Œå¯¦éš›æ¬Šç›Šä»¥å„ä¿éšªå¥‘ç´„æ¢æ¬¾èˆ‡ä¸»ç®¡æ©Ÿé—œå…¬å‘Šç‚ºä¸»ã€‚
                </p>
            </div>
        </div>
    );

    const StartFarmingPage = () => (
        <div className="max-w-4xl mx-auto px-4 py-12 animate-fade-in">
            <SectionHeader
                icon={Sprout}
                title="å¾äº‹è¾²æ¥­ï¼šçœŸå¯¦é¢æ­éœ²"
                subtitle="ä¸æ˜¯å‹¸é€€ï¼Œè€Œæ˜¯å¸Œæœ›ä½ å¸¶è‘—æ¸…æ¥šçš„é¢¨éšªèªçŸ¥è¸é€²ä¾†ã€‚"
            />
            <div className="space-y-4 text-sm text-slate-700">
                <p>
                    å¾ˆå¤šå›é„‰å‹™è¾²çš„äººï¼Œå¿ƒä¸­éƒ½æœ‰ä¸€å¡Šã€Œç†æƒ³ä¸­çš„ç”°ã€ã€‚ä½†åªçœ‹è¦‹ç¾å¥½çš„ä¸€é¢ï¼Œå®¹æ˜“å¿½ç•¥æ°£å€™ã€åƒ¹æ ¼ã€å‹å‹•å¼·åº¦ã€å®¶åº­ç…§é¡§ç­‰ç¾å¯¦å£“åŠ›ã€‚
                </p>
                <p>
                    é€™å€‹å°ˆå€æœƒæ•´ç†å‰è¼©å€‘èµ°éçš„å‘ï¼šåŒ…æ‹¬å¸¸è¦‹çš„æŠ•è³‡éŒ¯èª¤ã€å°è£œåŠ©åˆ¶åº¦çš„èª¤è§£ã€ä»¥åŠã€Œéš±å½¢æˆæœ¬ã€ï¼ˆå·¥æ™‚ã€èº«é«”å¥åº·ã€ç¶­ä¿®è²»ï¼‰ã€‚
                </p>
                <div className="bg-blue-50 border border-blue-100 rounded-xl p-4 text-xs text-blue-800">
                    å»ºè­°ï¼šåœ¨çœŸçš„è¾­æ‰åŸæœ¬å·¥ä½œå‰ï¼Œå…ˆç”¨ä¸€å¹´é€±æœ«æˆ–çŸ­æœŸå·¥è®€çš„æ–¹å¼ï¼Œå¯¦éš›é«”é©—ä¸åŒä½œç‰©èˆ‡è¾²æ³•ï¼Œä¸¦æŠŠè‡ªå·±çš„é«”åŠ›ã€å®¶åº­èˆ‡ç¶“æ¿Ÿå£“åŠ›ä¸€èµ·ç´å…¥è€ƒé‡ã€‚
                </div>
            </div>
        </div>
    );

    const GreenhousePage = () => (
        <div className="max-w-4xl mx-auto px-4 py-12 animate-fade-in">
            <SectionHeader
                icon={Tractor}
                title="æº«å®¤èˆ‡çœå·¥æ©Ÿå…·"
                subtitle="è®“æ©Ÿå™¨å¤šæµä¸€é»æ±—ï¼Œä½ å°±å¯ä»¥å°‘å—ä¸€é»å‚·ã€‚"
            />
            <div className="space-y-4 text-sm text-slate-700">
                <p>
                    æº«å®¤èˆ‡æ©Ÿå…·æŠ•è³‡å¾ˆå®¹æ˜“ã€Œä¸€æ¬¡èŠ±å¤§éŒ¢ã€ï¼Œä½†å¦‚æœæ²’æœ‰æ­é…å¥½ä½œç‰©ã€éŠ·å”®é€šè·¯èˆ‡ç¶­ä¿®èƒ½åŠ›ï¼Œåè€Œæœƒè®Šæˆå¦ä¸€ç¨®å£“åŠ›ã€‚
                </p>
                <p>
                    æ¥ä¸‹ä¾†æœƒé™¸çºŒæ•´ç†ï¼šå‰²è‰æ©Ÿã€å™´è—¥æ©Ÿã€æ¬é‹è¨­å‚™ã€æ²æšæº«å®¤ç­‰ï¼Œå¾ã€Œå®‰å…¨èˆ‡çœåŠ›ã€çš„è§’åº¦ï¼Œå”åŠ©ä½ é¸æ“‡é©åˆè‡ªå·±èº«é«”ç‹€æ³èˆ‡è¦æ¨¡çš„è¨­å‚™ã€‚
                </p>
            </div>
        </div>
    );

    const HealthPromoPage = () => (
        <div className="max-w-4xl mx-auto px-4 py-12 animate-fade-in">
            <SectionHeader
                icon={Activity}
                title="å¥åº·ä¿ƒé€²èˆ‡ä¼¸å±•"
                subtitle="æ¯å¤© 3ï½5 åˆ†é˜ï¼Œæ›ä¾†æœªä¾†å°‘å¹¾æ¬¡é–‹åˆ€ã€‚"
            />
            <div className="grid md:grid-cols-2 gap-6">
                {exerciseData.map((ex, idx) => (
                    <div
                        key={idx}
                        className="bg-white rounded-2xl border border-slate-200 p-5 shadow-sm"
                    >
                        <h3 className="font-bold text-slate-800 mb-1">
                            {ex.title}
                        </h3>
                        <p className="text-xs text-emerald-600 mb-2">
                            é©åˆå°è±¡ï¼š{ex.target}
                        </p>
                        <ol className="list-decimal list-inside text-xs text-slate-700 space-y-1">
                            {ex.steps.map((step, i) => (
                                <li key={i}>{step}</li>
                            ))}
                        </ol>
                    </div>
                ))}
            </div>
            <p className="text-[11px] text-slate-400 mt-4">
                â€» è‹¥æœ‰åš´é‡ç— ç—›ã€éº»æœ¨ã€ç„¡åŠ›æˆ–æ—¢å¾€è„Šæ¤æ‰‹è¡“å²ï¼Œè«‹å…ˆè«®è©¢é†«å¸«æˆ–ç‰©ç†æ²»ç™‚å¸«å¾Œå†é–‹å§‹é‹å‹•ã€‚
            </p>
        </div>
    );

    const ForumPage = () => (
        <div className="max-w-4xl mx-auto px-4 py-12 animate-fade-in">
            <SectionHeader
                icon={MessageCircle}
                title="è¾²æ°‘äº¤æµåœ’åœ°"
                subtitle="äº’ç›¸å ±è·¯ã€äº’ç›¸æé†’ï¼Œè®“å½¼æ­¤å°‘è¸©ä¸€é»é›·ã€‚"
            />
            <div className="space-y-4">
                {forumPosts.map((post) => (
                    <div
                        key={post.id}
                        className="bg-white rounded-2xl border border-slate-200 p-5 shadow-sm"
                    >
                        <div className="flex justify-between items-center mb-2">
                            <div className="flex items-center gap-2">
                                <div className="w-8 h-8 rounded-full bg-emerald-100 flex items-center justify-center text-xs font-bold text-emerald-700">
                                    {post.avatar}
                                </div>
                                <span className="text-sm text-slate-600">
                                    {post.author}
                                </span>
                            </div>
                            <Badge color="blue">{post.tag}</Badge>
                        </div>
                        <h3 className="font-bold text-slate-800 mb-1">
                            {post.title}
                        </h3>
                        <p className="text-xs text-slate-600">{post.content}</p>
                    </div>
                ))}
                <p className="text-xs text-slate-400">
                    â€» æœªä¾†å¯ä»¥ä¸²æ¥ LINE ç¾¤çµ„æˆ– FB ç¤¾åœ˜çš„ç²¾è¯è²¼æ–‡ï¼Œè®“æ–°æ‰‹å¿«é€Ÿè£œèª²ã€‚
                </p>
            </div>
        </div>
    );

    const VideosPage = () => (
        <div className="max-w-6xl mx-auto px-4 py-12 animate-fade-in">
            <SectionHeader
                icon={PlayCircle}
                title="å½±éŸ³å­¸ç¿’å°ˆå€"
                subtitle="ç”¨çœ‹ã€ç”¨è½ï¼Œéƒ½æ¯”è‡ªå·±ä¸€å€‹äººæ‘¸ç´¢ä¾†å¾—è¼•é¬†ã€‚"
            />
            <div className="grid md:grid-cols-3 gap-6">
                {videoData.map((video) => (
                    <a
                        key={video.id}
                        href={`https://www.youtube.com/watch?v=${video.youtubeId}`}
                        target="_blank"
                        rel="noreferrer"
                        className="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden hover:shadow-md transition-shadow flex flex-col"
                    >
                        <div className="relative h-40 bg-slate-900">
                            <img
                                src={`https://img.youtube.com/vi/${video.youtubeId}/mqdefault.jpg`}
                                alt={video.title}
                                className="w-full h-full object-cover"
                            />
                            <div className="absolute inset-0 bg-gradient-to-t from-black/50 via-black/10 to-transparent" />
                            <PlayCircle className="absolute bottom-3 right-3 text-white drop-shadow-md" />
                            <div className="absolute top-3 left-3">
                                <Badge color="orange">{video.type}</Badge>
                            </div>
                        </div>
                        <div className="p-4 flex-1 flex flex-col">
                            <h3 className="font-bold text-slate-800 mb-1 line-clamp-2">
                                {video.title}
                            </h3>
                            <p className="text-xs text-slate-500 mb-2 line-clamp-2">
                                {video.desc}
                            </p>
                            <div className="mt-auto flex justify-between items-center text-[11px] text-slate-400">
                                <span>{video.views} æ¬¡è§€çœ‹</span>
                                <span>{video.date}</span>
                            </div>
                        </div>
                    </a>
                ))}
            </div>
        </div>
    );

    const ResourcesPage = () => (
        <div className="max-w-4xl mx-auto px-4 py-12 animate-fade-in">
            <SectionHeader
                icon={Download}
                title="è³‡æºä¸‹è¼‰"
                subtitle="æœªä¾†æœƒæ”¾ä¸Šç°¡å ±ã€æª¢æ ¸è¡¨èˆ‡å¡«å¯«ç¯„ä¾‹ï¼Œè®“ä½ å¯ä»¥å¸¶å›å»æ…¢æ…¢çœ‹ã€‚"
            />
            <div className="bg-slate-50 border border-slate-200 rounded-2xl p-6 text-sm text-slate-600">
                <p>
                    ç›®å‰å°šåœ¨æ•´ç†ä¸­ï¼Œé è¨ˆæœƒæä¾›ï¼š
                </p>
                <ul className="list-disc list-inside mt-2 space-y-1 text-xs">
                    <li>è¾²æ¥­è·ç½ç™¼ç”Ÿæ™‚çš„ã€Œå°±é†«èˆ‡ç”³è«‹æµç¨‹ã€åœ–å¡</li>
                    <li>å‹ä¿ã€å‹é€€ã€åœ‹ä¿ã€è¾²ä¿ã€è¾²é€€å°ç…§è¡¨</li>
                    <li>çµ¦é†«å¸«çœ‹çš„ã€Œè·æ¥­èªªæ˜å°ç´™æ¢ã€ç¯„æœ¬</li>
                    <li>é€€ä¼‘é‡‘è©¦ç®—å¡«å¯«å°æŠ„ï¼ˆç´™æœ¬ç‰ˆï¼‰</li>
                </ul>
            </div>
        </div>
    );

    // --- ä¸»ç¨‹å¼ ---

    function App() {
        // é è¨­é é¢ï¼šç›´æ¥é€²ã€Œé€€ä¼‘è©¦ç®—ã€
        const [page, setPage] = useState('calculator');
        const [menuOpen, setMenuOpen] = useState(false);
        const [scrolled, setScrolled] = useState(false);
        const [currentLang, setCurrentLang] = useState('zh');
        const [showLangMenu, setShowLangMenu] = useState(false);
        const t = translations[currentLang];
        const [currentDate, setCurrentDate] = useState('');

        useEffect(() => {
            window.scrollTo(0, 0);
            setMenuOpen(false);
        }, [page]);

        useEffect(() => {
            const handleScroll = () => setScrolled(window.scrollY > 20);
            window.addEventListener('scroll', handleScroll);

            const date = new Date();
            const options = {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                weekday: 'long'
            };
            setCurrentDate(date.toLocaleDateString('zh-TW', options));

            return () => window.removeEventListener('scroll', handleScroll);
        }, []);

        const changeLang = (lang) => {
            setCurrentLang(lang);
            setShowLangMenu(false);
        };

        const navItems = [
            { id: 'home', label: t.nav.home },
            { id: 'startFarming', label: t.nav.start },
            { id: 'greenhouse', label: t.nav.greenhouse },
            { id: 'safety', label: t.nav.safety },
            { id: 'healthPromo', label: t.nav.health },
            { id: 'economics', label: t.nav.insurance },
            { id: 'calculator', label: t.nav.calculator },
            { id: 'forum', label: t.nav.forum },
            { id: 'videos', label: t.nav.video },
            { id: 'resources', label: t.nav.resources }
        ];

        const renderPage = () => {
            switch (page) {
                case 'home':
                    return (
                        <HomePage
                            setPage={setPage}
                            lang={t}
                            currentDate={currentDate}
                        />
                    );
                case 'startFarming':
                    return <StartFarmingPage />;
                case 'greenhouse':
                    return <GreenhousePage />;
                case 'safety':
                    return <SafetyPage lang={t} />;
                case 'healthPromo':
                    return <HealthPromoPage />;
                case 'economics':
                    return <EconomicsPage />;
                case 'calculator':
                    return <CalculatorPage />;
                case 'forum':
                    return <ForumPage />;
                case 'videos':
                    return <VideosPage />;
                case 'resources':
                    return <ResourcesPage />;
                default:
                    return (
                        <HomePage
                            setPage={setPage}
                            lang={t}
                            currentDate={currentDate}
                        />
                    );
            }
        };

        return (
            <div className="min-h-screen bg-slate-50 font-sans text-slate-800 selection:bg-emerald-200">
                {/* å°è¦½åˆ— */}
                <nav
                    className={`fixed top-0 w-full z-50 transition-all duration-300 ${
                        scrolled
                            ? 'bg-white/95 backdrop-blur-md shadow-md py-2'
                            : 'bg-emerald-900 text-white py-3'
                    }`}
                >
                    <div className="max-w-[1400px] mx-auto px-4">
                        <div className="flex justify-between items-center">
                            <div
                                className="flex items-center cursor-pointer gap-2 shrink-0"
                                onClick={() => setPage('home')}
                            >
                                <img
                                    src="Logo.PNG"
                                    alt="Logo"
                                    className="h-10 w-auto object-contain bg-white rounded-lg"
                                />
                                <span
                                    className={`font-extrabold text-xl tracking-tight hidden sm:block ${
                                        scrolled
                                            ? 'text-emerald-900'
                                            : 'text-white'
                                    }`}
                                >
                                    {t.title}
                                </span>
                            </div>

                            <div className="hidden lg:flex items-center gap-1 overflow-x-auto no-scrollbar mx-4">
                                {navItems.map((item) => (
                                    <button
                                        key={item.id}
                                        onClick={() => setPage(item.id)}
                                        className={`px-3 py-2 rounded-full text-sm font-bold whitespace-nowrap transition-all ${
                                            page === item.id
                                                ? 'bg-emerald-500 text-white shadow'
                                                : scrolled
                                                ? 'text-slate-600 hover:bg-slate-100'
                                                : 'text-emerald-50/80 hover:bg-emerald-800/70'
                                        }`}
                                    >
                                        {item.label}
                                    </button>
                                ))}
                            </div>

                            <div className="flex items-center gap-2">
                                <div className="relative">
                                    <button
                                        onClick={() =>
                                            setShowLangMenu(!showLangMenu)
                                        }
                                        className={`flex items-center gap-1 px-3 py-2 rounded-full font-bold text-xs transition-colors ${
                                            scrolled
                                                ? 'text-slate-700 bg-slate-100 hover:bg-slate-200'
                                                : 'text-emerald-100 bg-emerald-800/60 hover:bg-emerald-700'
                                        }`}
                                    >
                                        <Globe size={14} />{' '}
                                        {currentLang.toUpperCase()}
                                    </button>
                                    {showLangMenu && (
                                        <div className="absolute right-0 mt-2 w-32 bg-white rounded-xl shadow-xl border border-slate-100 overflow-hidden animate-fade-in text-slate-800 text-sm">
                                            <button
                                                className="w-full text-left px-3 py-2 hover:bg-slate-100"
                                                onClick={() => changeLang('zh')}
                                            >
                                                ä¸­æ–‡
                                            </button>
                                            <button
                                                className="w-full text-left px-3 py-2 hover:bg-slate-100"
                                                onClick={() => changeLang('en')}
                                            >
                                                English
                                            </button>
                                            <button
                                                className="w-full text-left px-3 py-2 hover:bg-slate-100"
                                                onClick={() => changeLang('id')}
                                            >
                                                Bahasa
                                            </button>
                                        </div>
                                    )}
                                </div>
                                <button
                                    onClick={() => setMenuOpen(!menuOpen)}
                                    className={`lg:hidden p-2 ${
                                        scrolled
                                            ? 'text-slate-800'
                                            : 'text-white'
                                    }`}
                                >
                                    {menuOpen ? (
                                        <X size={24} />
                                    ) : (
                                        <Menu size={24} />
                                    )}
                                </button>
                            </div>
                        </div>
                    </div>

                    {menuOpen && (
                        <div className="lg:hidden absolute top-full left-0 w-full bg-white border-t border-slate-100 shadow-xl animate-fade-in">
                            <div className="p-4 space-y-2">
                                {navItems.map((item) => (
                                    <button
                                        key={item.id}
                                        onClick={() => setPage(item.id)}
                                        className={`w-full text-left px-3 py-2 rounded-lg text-sm font-bold ${
                                            page === item.id
                                                ? 'bg-emerald-500 text-white'
                                                : 'text-slate-700 hover:bg-slate-100'
                                        }`}
                                    >
                                        {item.label}
                                    </button>
                                ))}
                            </div>
                        </div>
                    )}
                </nav>

                {/* å…§å®¹ */}
                <main className="min-h-screen pt-20">{renderPage()}</main>

                {/* å›ºå®š SOS æŒ‰éˆ• */}
                <SOSButton onClick={() => setPage('safety')} label={t.nav.safety} />

                {/* ç°¡æ˜“ footer */}
                <footer className="bg-slate-900 text-slate-400 py-8 mt-8">
                    <div className="max-w-6xl mx-auto px-4 flex flex-col md:flex-row justify-between gap-4 text-xs">
                        <p>
                            æœ¬ç¶²ç«™å…§å®¹å¤šç‚ºç¤ºæ„èˆ‡æ¦‚å¿µæ•´ç†ï¼Œå¯¦éš›æ¬Šç›Šä»¥å„ä¸»ç®¡æ©Ÿé—œèˆ‡ä¿éšªå¥‘ç´„ç‚ºæº–ã€‚
                        </p>
                        <p className="text-slate-500">
                            Â© {new Date().getFullYear()} å°Šåš´è¾²æ¥­ Â· Side Project Demo
                        </p>
                    </div>
                </footer>
            </div>
        );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
</script>
</body>
</html>
