<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>尊嚴農業 - 智慧安全管理平台</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        @keyframes fade-in-up { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in-up { animation: fade-in-up 0.6s ease-out forwards; }
        .glass-effect { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">
    
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- 1. 圖示系統設定 ---
        const createIcon = (name) => ({ size = 24, className = "", ...props }) => {
            const icon = lucide.icons[name];
            if (!icon) return <span>?</span>;
            return (
                <svg {...icon.attrs} width={size} height={size} className={className} {...props}>
                    {icon.children && icon.children.map(([tag, attrs], index) => {
                        const Tag = tag;
                        return <Tag key={index} {...attrs} />;
                    })}
                </svg>
            );
        };

        const iconNames = [
            'Sprout', 'ShieldCheck', 'Activity', 'BookOpen', 'AlertTriangle', 
            'Sun', 'Wind', 'Droplets', 'Thermometer', 'Tractor', 'FlaskConical', 
            'Home', 'Menu', 'X', 'ChevronRight', 'CheckCircle2', 'XCircle', 
            'PlayCircle', 'Download', 'Phone', 'Search', 'User', 'HeartPulse',
            'ArrowRight', 'AlertOctagon', 'Info'
        ];

        const Icons = {};
        iconNames.forEach(name => Icons[name] = createIcon(name));
        const { 
            Sprout, ShieldCheck, Activity, BookOpen, AlertTriangle, 
            Sun, Wind, Droplets, Thermometer, Tractor, FlaskConical, 
            Home, Menu, X, ChevronRight, CheckCircle2, XCircle, 
            PlayCircle, Download, Phone, Search, User, HeartPulse,
            ArrowRight, AlertOctagon, Info
        } = Icons;

        // --- 2. 資料庫 (融合澳韓內容) ---

        // 澳洲風格：結構化審核清單 (Categorized Audit)
        const auditCategories = [
            {
                id: 'machine',
                title: '農機安全 (Machinery)',
                icon: <Tractor />,
                color: 'blue',
                questions: [
                    { id: 'm1', q: '拖拉機/農機是否裝設「翻覆保護結構 (ROPS)」？', critical: true },
                    { id: 'm2', q: '轉動軸 (PTO) 是否有完整的黃色防護罩？', critical: true },
                    { id: 'm3', q: '是否定期檢查煞車與燈光系統？', critical: false }
                ]
            },
            {
                id: 'chem',
                title: '化學品管理 (Chemicals)',
                icon: <FlaskConical />,
                color: 'purple',
                questions: [
                    { id: 'c1', q: '農藥櫃是否上鎖並貼有危險標示？', critical: true },
                    { id: 'c2', q: '是否備有完整的防護衣 (PPE) 與呼吸防護具？', critical: true },
                    { id: 'c3', q: '是否有保留完整的農藥購買與使用紀錄？', critical: false }
                ]
            },
            {
                id: 'env',
                title: '作業環境 (Environment)',
                icon: <Sun />,
                color: 'orange',
                questions: [
                    { id: 'e1', q: '是否有設定「高溫作業」的休息與補水計畫？', critical: true },
                    { id: 'e2', q: '田間路面是否平整，無隱藏坑洞？', critical: false },
                    { id: 'e3', q: '獨自作業時，是否有定時回報機制 (Man-down check)？', critical: true }
                ]
            }
        ];

        // 韓國風格：身體部位復健 (Body Map Exercises)
        const bodyExercises = {
            neck: { title: "頸部放鬆", desc: "低頭採收族必做", steps: ["下巴內收", "頭部緩慢左右轉動", "雙手抱頭輕壓"] },
            shoulder: { title: "旋轉肌群伸展", desc: "噴藥舉手族必做", steps: ["毛巾操拉伸", "手臂畫大圓", "肩膀聳起放下"] },
            back: { title: "貓牛式伸展", desc: "彎腰拔草族必做", steps: ["四足跪姿", "吸氣塌腰抬頭", "吐氣拱背看肚臍"] },
            knee: { title: "股四頭肌強化", desc: "負重行走族必做", steps: ["坐姿抬腿", "靠牆深蹲", "單腳站立平衡"] }
        };

        // 韓國風格：視覺化圖卡 (Visual Cards)
        const visualGuides = [
            { id: 1, title: "預防熱衰竭", tag: "夏季必讀", imgColor: "bg-orange-500", icon: <Sun size={48} className="text-white"/>, content: "四步驟：躲太陽、脫衣物、潑冷水、快送醫。" },
            { id: 2, title: "農藥中毒急救", tag: "緊急時刻", imgColor: "bg-purple-600", icon: <FlaskConical size={48} className="text-white"/>, content: "切記！不要催吐。請攜帶農藥罐一同就醫。" },
            { id: 3, title: "正確搬運法", tag: "護腰專區", imgColor: "bg-emerald-600", icon: <User size={48} className="text-white"/>, content: "重物貼身，用大腿力量站起來，背部挺直。" },
        ];

        // --- 3. UI 元件 ---

        const NavLink = ({ active, onClick, icon, label }) => (
            <button 
                onClick={onClick}
                className={`flex items-center gap-2 px-4 py-2 rounded-full font-bold transition-all ${active ? 'bg-emerald-600 text-white shadow-md' : 'text-slate-500 hover:bg-slate-100'}`}
            >
                {icon}
                <span>{label}</span>
            </button>
        );

        const SectionTitle = ({ title, subtitle, align="center" }) => (
            <div className={`mb-8 text-${align}`}>
                <h2 className="text-3xl font-extrabold text-slate-800 tracking-tight mb-2">{title}</h2>
                <div className={`h-1.5 w-20 bg-emerald-500 rounded-full mb-3 ${align === 'center' ? 'mx-auto' : ''}`}></div>
                <p className="text-slate-500 text-lg">{subtitle}</p>
            </div>
        );

        // --- 4. 主要頁面模組 ---

        // 首頁：儀表板風格 (Dashboard)
        const Dashboard = ({ setPage }) => (
            <div className="animate-fade-in-up space-y-8">
                {/* Hero Section */}
                <div className="bg-emerald-900 rounded-[2.5rem] p-8 md:p-12 text-white relative overflow-hidden shadow-2xl">
                    <div className="absolute top-0 right-0 w-64 h-64 bg-emerald-500 rounded-full blur-[100px] opacity-30"></div>
                    <div className="relative z-10 grid md:grid-cols-2 gap-8 items-center">
                        <div>
                            <div className="inline-flex items-center gap-2 bg-emerald-800/50 border border-emerald-700/50 px-3 py-1 rounded-full text-sm mb-4">
                                <span className="w-2 h-2 rounded-full bg-green-400 animate-pulse"></span>
                                系統運行中 | 民雄鄉氣溫 32°C
                            </div>
                            <h1 className="text-4xl md:text-5xl font-extrabold mb-4 leading-tight">
                                尊嚴農業<br/><span className="text-emerald-300">智慧安全管理平台</span>
                            </h1>
                            <p className="text-emerald-100/80 text-lg mb-8 max-w-md">
                                結合澳洲風險管理邏輯與韓國人體工學防護，打造台灣農民的數位護盾。
                            </p>
                            <div className="flex flex-wrap gap-4">
                                <button onClick={() => setPage('audit')} className="bg-white text-emerald-900 px-6 py-3 rounded-xl font-bold hover:bg-emerald-50 transition-colors flex items-center gap-2">
                                    <ShieldCheck size={20}/> 開始農場體檢
                                </button>
                                <button onClick={() => setPage('body')} className="bg-emerald-700 text-white px-6 py-3 rounded-xl font-bold hover:bg-emerald-600 transition-colors flex items-center gap-2 border border-emerald-600">
                                    <Activity size={20}/> 哪裡痠痛？
                                </button>
                            </div>
                        </div>
                        
                        {/* 今日風險卡 (Live Risk Card) */}
                        <div className="bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6">
                            <h3 className="font-bold text-emerald-200 mb-4 flex items-center gap-2"><AlertTriangle size={18}/> 今日作業風險預警</h3>
                            <div className="space-y-4">
                                <div className="flex items-center justify-between bg-orange-500/20 p-3 rounded-xl border border-orange-500/30">
                                    <div className="flex items-center gap-3">
                                        <div className="bg-orange-500 p-2 rounded-lg text-white"><Sun size={20}/></div>
                                        <div>
                                            <div className="font-bold text-white">熱危害指數：高</div>
                                            <div className="text-xs text-orange-200">11:00-14:00 避免戶外作業</div>
                                        </div>
                                    </div>
                                    <span className="text-2xl font-bold text-orange-400">32°C</span>
                                </div>
                                <div className="flex items-center justify-between bg-blue-500/20 p-3 rounded-xl border border-blue-500/30">
                                    <div className="flex items-center gap-3">
                                        <div className="bg-blue-500 p-2 rounded-lg text-white"><Wind size={20}/></div>
                                        <div>
                                            <div className="font-bold text-white">農藥飄散風險：低</div>
                                            <div className="text-xs text-blue-200">風速微弱，適合噴藥</div>
                                        </div>
                                    </div>
                                    <span className="text-2xl font-bold text-blue-400">一級</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                {/* 快捷功能模組 Grid */}
                <div className="grid md:grid-cols-3 gap-6">
                    <div onClick={() => setPage('guides')} className="bg-white p-6 rounded-3xl shadow-sm border border-slate-100 hover:shadow-lg transition-all cursor-pointer group">
                        <div className="w-12 h-12 bg-purple-100 text-purple-600 rounded-2xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                            <BookOpen size={24}/>
                        </div>
                        <h3 className="text-xl font-bold text-slate-800 mb-2">安全圖卡懶人包</h3>
                        <p className="text-slate-500 text-sm">像看漫畫一樣學習職安知識，30秒掌握重點。</p>
                    </div>
                    <div className="bg-white p-6 rounded-3xl shadow-sm border border-slate-100 hover:shadow-lg transition-all cursor-pointer group">
                        <div className="w-12 h-12 bg-blue-100 text-blue-600 rounded-2xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                            <Download size={24}/>
                        </div>
                        <h3 className="text-xl font-bold text-slate-800 mb-2">資源下載中心</h3>
                        <p className="text-slate-500 text-sm">各種標示貼紙、檢核表 PDF 免費下載。</p>
                    </div>
                    <div className="bg-white p-6 rounded-3xl shadow-sm border border-slate-100 hover:shadow-lg transition-all cursor-pointer group">
                        <div className="w-12 h-12 bg-red-100 text-red-600 rounded-2xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                            <Phone size={24}/>
                        </div>
                        <h3 className="text-xl font-bold text-slate-800 mb-2">緊急應變通訊</h3>
                        <p className="text-slate-500 text-sm">毒物中心電話、最近的 AED 位置查詢。</p>
                    </div>
                </div>
            </div>
        );

        // 頁面 2：專業農場審核 (Audit) - 澳洲模式
        const AuditSystem = () => {
            const [scores, setScores] = useState({ machine: 0, chem: 0, env: 0 });
            const [checked, setChecked] = useState({});

            const toggleCheck = (catId, qId) => {
                const key = `${catId}-${qId}`;
                const isChecked = !checked[key];
                setChecked(prev => ({ ...prev, [key]: isChecked }));
                
                // 簡單計分邏輯
                setScores(prev => ({
                    ...prev,
                    [catId]: isChecked ? prev[catId] + 1 : prev[catId] - 1
                }));
            };

            return (
                <div className="max-w-4xl mx-auto animate-fade-in-up pb-12">
                    <SectionTitle 
                        title="農場安全自我檢核" 
                        subtitle="源自澳洲 AgHealth 的分級管理制度，找出隱藏的危險。" 
                    />

                    <div className="space-y-8">
                        {auditCategories.map(cat => (
                            <div key={cat.id} className="bg-white rounded-3xl shadow-md overflow-hidden border border-slate-100">
                                <div className={`bg-${cat.color}-50 p-6 border-b border-${cat.color}-100 flex justify-between items-center`}>
                                    <div className="flex items-center gap-4">
                                        <div className={`p-3 bg-white rounded-xl text-${cat.color}-600 shadow-sm`}>{cat.icon}</div>
                                        <h3 className={`text-xl font-bold text-${cat.color}-900`}>{cat.title}</h3>
                                    </div>
                                    <div className={`text-${cat.color}-600 font-bold bg-white px-3 py-1 rounded-full text-sm shadow-sm`}>
                                        已完成: {scores[cat.id]} / {cat.questions.length}
                                    </div>
                                </div>
                                <div className="p-6 space-y-4">
                                    {cat.questions.map(q => (
                                        <label key={q.id} className="flex items-start gap-4 p-4 rounded-xl hover:bg-slate-50 cursor-pointer transition-colors border border-transparent hover:border-slate-200">
                                            <div className={`w-6 h-6 rounded border-2 flex items-center justify-center flex-shrink-0 mt-1 transition-colors ${checked[`${cat.id}-${q.id}`] ? `bg-${cat.color}-500 border-${cat.color}-500 text-white` : 'border-slate-300'}`}>
                                                {checked[`${cat.id}-${q.id}`] && <CheckCircle2 size={16}/>}
                                            </div>
                                            <div onClick={() => toggleCheck(cat.id, q.id)} className="flex-grow">
                                                <div className="font-bold text-slate-800 text-lg mb-1">{q.q}</div>
                                                {q.critical && <span className="text-xs font-bold text-red-500 bg-red-50 px-2 py-0.5 rounded">Critical / 致命風險</span>}
                                            </div>
                                        </label>
                                    ))}
                                </div>
                            </div>
                        ))}
                    </div>

                    <div className="mt-8 bg-slate-800 text-slate-300 p-6 rounded-2xl text-center text-sm">
                        * 此檢核表僅供自我管理參考，不具法律效力。如需專業認證，請洽詢農會推廣部。
                    </div>
                </div>
            );
        };

        // 頁面 3：人體工學地圖 (Body Map) - 韓國模式
        const BodyMap = () => {
            const [selectedPart, setSelectedPart] = useState('back');
            const currentEx = bodyExercises[selectedPart];

            return (
                <div className="max-w-5xl mx-auto animate-fade-in-up pb-12">
                    <SectionTitle 
                        title="人體工學保健室" 
                        subtitle="哪裡痛點哪裡！源自韓國農村振興廳的針對性運動處方。" 
                    />

                    <div className="grid md:grid-cols-2 gap-12 items-start">
                        {/* 左側：互動地圖 (用按鈕模擬身體部位) */}
                        <div className="bg-white rounded-[3rem] p-8 shadow-lg border border-slate-100 relative min-h-[400px] flex flex-col items-center justify-center bg-[url('https://www.transparenttextures.com/patterns/graphy.png')]">
                            <h3 className="absolute top-8 text-slate-400 font-bold uppercase tracking-widest">Select Body Part</h3>
                            
                            {/* 模擬人形結構 */}
                            <div className="relative w-64 h-80">
                                <button onClick={() => setSelectedPart('neck')} className={`absolute top-0 left-1/2 -translate-x-1/2 w-20 h-20 rounded-full flex items-center justify-center font-bold shadow-lg transition-all ${selectedPart === 'neck' ? 'bg-emerald-500 text-white scale-110 ring-4 ring-emerald-200' : 'bg-white text-slate-600 hover:bg-slate-50'}`}>
                                    頸部
                                </button>
                                <button onClick={() => setSelectedPart('shoulder')} className={`absolute top-24 left-0 w-20 h-20 rounded-full flex items-center justify-center font-bold shadow-lg transition-all ${selectedPart === 'shoulder' ? 'bg-emerald-500 text-white scale-110 ring-4 ring-emerald-200' : 'bg-white text-slate-600 hover:bg-slate-50'}`}>
                                    肩膀
                                </button>
                                <button onClick={() => setSelectedPart('back')} className={`absolute top-24 right-0 w-20 h-20 rounded-full flex items-center justify-center font-bold shadow-lg transition-all ${selectedPart === 'back' ? 'bg-emerald-500 text-white scale-110 ring-4 ring-emerald-200' : 'bg-white text-slate-600 hover:bg-slate-50'}`}>
                                    腰背
                                </button>
                                <button onClick={() => setSelectedPart('knee')} className={`absolute bottom-0 left-1/2 -translate-x-1/2 w-20 h-20 rounded-full flex items-center justify-center font-bold shadow-lg transition-all ${selectedPart === 'knee' ? 'bg-emerald-500 text-white scale-110 ring-4 ring-emerald-200' : 'bg-white text-slate-600 hover:bg-slate-50'}`}>
                                    膝蓋
                                </button>
                                {/* 連接線 */}
                                <div className="absolute top-10 left-1/2 h-16 w-1 bg-slate-200 -z-10 -translate-x-1/2"></div>
                                <div className="absolute top-32 left-10 w-44 h-1 bg-slate-200 -z-10"></div>
                                <div className="absolute top-32 left-1/2 h-32 w-1 bg-slate-200 -z-10 -translate-x-1/2"></div>
                            </div>
                        </div>

                        {/* 右側：處方卡片 */}
                        <div className="space-y-6">
                            <div className="bg-emerald-600 rounded-3xl p-8 text-white shadow-xl relative overflow-hidden">
                                <div className="absolute -right-10 -bottom-10 text-emerald-500 opacity-50"><Activity size={150}/></div>
                                <div className="relative z-10">
                                    <div className="uppercase tracking-widest text-emerald-200 text-sm font-bold mb-2">Exercise Therapy</div>
                                    <h2 className="text-4xl font-extrabold mb-2">{currentEx.title}</h2>
                                    <p className="text-xl text-emerald-100 mb-6">{currentEx.desc}</p>
                                    
                                    <div className="bg-white/10 backdrop-blur-md rounded-2xl p-6 border border-white/20">
                                        <h4 className="font-bold text-lg mb-4 flex items-center gap-2"><PlayCircle/> 動作步驟</h4>
                                        <ul className="space-y-3">
                                            {currentEx.steps.map((step, i) => (
                                                <li key={i} className="flex items-center gap-3">
                                                    <span className="w-6 h-6 rounded-full bg-white text-emerald-600 flex items-center justify-center font-bold text-xs">{i+1}</span>
                                                    <span>{step}</span>
                                                </li>
                                            ))}
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <button className="w-full bg-white border-2 border-slate-200 py-4 rounded-2xl font-bold text-slate-600 hover:bg-slate-50 flex items-center justify-center gap-2">
                                <PlayCircle size={20}/> 觀看示範影片
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // 頁面 4：卡片新聞 (Visual Guides) - 韓國模式
        const VisualGuides = () => (
            <div className="max-w-6xl mx-auto animate-fade-in-up pb-12">
                <SectionTitle 
                    title="安全圖卡懶人包" 
                    subtitle="複雜法規看不懂？我們用圖畫說給你聽。" 
                />
                
                <div className="grid md:grid-cols-3 gap-8">
                    {visualGuides.map(card => (
                        <div key={card.id} className="bg-white rounded-3xl shadow-lg overflow-hidden group hover:-translate-y-2 transition-transform duration-300">
                            {/* 卡片圖片區 */}
                            <div className={`${card.imgColor} h-48 flex flex-col items-center justify-center relative overflow-hidden`}>
                                <div className="absolute w-full h-full bg-black/10 group-hover:bg-transparent transition-colors"></div>
                                <div className="relative z-10 transform group-hover:scale-110 transition-transform duration-500">
                                    {card.icon}
                                </div>
                                <span className="absolute bottom-4 right-4 bg-white/20 backdrop-blur-md text-white px-3 py-1 rounded-full text-xs font-bold border border-white/30">
                                    {card.tag}
                                </span>
                            </div>
                            
                            {/* 內容區 */}
                            <div className="p-8">
                                <h3 className="text-2xl font-bold text-slate-800 mb-3">{card.title}</h3>
                                <p className="text-slate-500 leading-relaxed mb-6">
                                    {card.content}
                                </p>
                                <button className="w-full py-3 rounded-xl border-2 border-slate-100 font-bold text-slate-600 hover:bg-slate-50 hover:border-slate-300 transition-colors flex items-center justify-center gap-2">
                                    <Download size={18}/> 下載分享
                                </button>
                            </div>
                        </div>
                    ))}
                </div>
            </div>
        );

        // --- 5. 主應用程式架構 ---

        const App = () => {
            const [activePage, setActivePage] = useState('home');

            // 導航配置
            const navItems = [
                { id: 'home', label: '首頁總覽', icon: <Home size={18}/> },
                { id: 'audit', label: '農場體檢', icon: <ShieldCheck size={18}/> },
                { id: 'body', label: '人體工學', icon: <Activity size={18}/> },
                { id: 'guides', label: '安全圖卡', icon: <BookOpen size={18}/> },
            ];

            return (
                <div className="min-h-screen flex flex-col bg-slate-50 selection:bg-emerald-200">
                    {/* 頂部導航 */}
                    <nav className="sticky top-0 z-50 glass-effect border-b border-slate-200/60">
                        <div className="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
                            <div className="flex items-center gap-2 cursor-pointer" onClick={() => setActivePage('home')}>
                                <div className="bg-emerald-600 text-white p-2 rounded-lg">
                                    <Sprout size={24}/>
                                </div>
                                <span className="font-extrabold text-xl text-slate-800 tracking-tight hidden md:block">尊嚴農業</span>
                            </div>

                            <div className="flex items-center gap-2 overflow-x-auto no-scrollbar">
                                {navItems.map(item => (
                                    <NavLink 
                                        key={item.id}
                                        active={activePage === item.id}
                                        onClick={() => setActivePage(item.id)}
                                        {...item}
                                    />
                                ))}
                            </div>
                        </div>
                    </nav>

                    {/* 主要內容區 */}
                    <main className="flex-grow p-4 md:p-8">
                        {activePage === 'home' && <Dashboard setPage={setActivePage} />}
                        {activePage === 'audit' && <AuditSystem />}
                        {activePage === 'body' && <BodyMap />}
                        {activePage === 'guides' && <VisualGuides />}
                    </main>

                    {/* 頁尾 */}
                    <footer className="bg-white border-t border-slate-200 py-12 mt-8">
                        <div className="max-w-6xl mx-auto px-4 text-center">
                            <div className="flex justify-center items-center gap-2 mb-4 text-slate-400 font-bold text-lg">
                                <Sprout /> 尊嚴農業 Dignified Agriculture
                            </div>
                            <p className="text-slate-400 text-sm max-w-lg mx-auto leading-relaxed">
                                本平台設計概念融合澳洲 AgHealth 風險管理系統與韓國農民安全 365 互動體驗。<br/>
                                致力於提升台灣農業工作者的職業安全與健康。
                            </p>
                            <div className="mt-8 text-xs text-slate-300">
                                © 2025 Dignified Agriculture Project. All rights reserved.
                            </div>
                        </div>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
