<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°Šåš´è¾²æ¥­ - çŸ¥è­˜ä¸­å¿ƒ</title>
    
    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React 18 UMD -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        @keyframes fade-in { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fade-in 0.5s ease-out forwards; }

        .body-btn { transition: all 0.3s; }
        .body-btn:hover { transform: scale(1.1); }
        .body-btn.active { background-color: #10b981; color: white; border-color: #059669; box-shadow: 0 0 0 4px #a7f3d0; }

        .hero-bg {
            background-image:
                radial-gradient(circle at 0 0, rgba(16,185,129,0.25), transparent 55%),
                radial-gradient(circle at 100% 0, rgba(59,130,246,0.18), transparent 55%);
        }
        .card-pattern {
            background-image: radial-gradient(circle at 1px 1px, rgba(148,163,184,0.12) 1px, transparent 0);
            background-size: 18px 18px;
        }
    </style>
</head>
<body class="bg-slate-50">
    
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Lucide ICON FIX ---
        const createLucideComponent = (name) => ({ size = 24, className = "", ...props }) => {
            const icon = lucide.icons[name];
            if (!icon) return <span className="text-xs">?</span>;
            return (
                <svg
                    {...icon.attrs}
                    width={size}
                    height={size}
                    className={className}
                    {...props}
                >
                    {icon.children && icon.children.map(([tag, attrs], index) => {
                        const Tag = tag;
                        return <Tag key={index} {...attrs} />;
                    })}
                </svg>
            );
        };

        const iconList = [
            'Shield', 'Sun', 'AlertTriangle', 'Activity', 'Sprout', 
            'Users', 'BookOpen', 'Phone', 'Download', 'ChevronDown', 
            'ChevronUp', 'Menu', 'X', 'ArrowRight', 'Heart', 'DollarSign',
            'Tractor', 'HelpCircle', 'Video', 'MessageCircle', 'PlayCircle', 
            'Calendar', 'Hammer', 'MapPin', 'ThumbsUp', 'Share2', 'Search',
            'Wind', 'Droplets', 'Mic', 'Globe', 'Clock', 'ClipboardCheck',
            'CheckCircle2', 'FlaskConical', 'User'
        ];

        const Icons = {};
        iconList.forEach(name => { Icons[name] = createLucideComponent(name); });

        const { 
            Shield, Sun, AlertTriangle, Activity, Sprout, 
            Users, BookOpen, Phone, Download, ChevronDown, 
            ChevronUp, Menu, X, ArrowRight, Heart, DollarSign,
            Tractor, HelpCircle, Video, MessageCircle, PlayCircle, 
            Calendar, Hammer, MapPin, ThumbUp, ThumbsUp, Share2, Search,
            Wind, Droplets, Mic, Globe, Clock, ClipboardCheck,
            CheckCircle2, FlaskConical, User
        } = Icons;

        // --- 1. è³‡æ–™åº«ï¼ˆç¹ä¸­ï¼‰ ---

        const translations = {
            zh: {
                title: "å°Šåš´è¾²æ¥­",
                subtitle: "çŸ¥è­˜ä¸­å¿ƒ",
                heroDesc: "é€£çµæ”¿åºœè³‡æºã€é†«ç™‚å°ˆæ¥­èˆ‡åœ¨åœ°ç¶“é©—ï¼Œè®“è¾²æ¥­æˆç‚ºä¸€ä»½æœ‰å°Šåš´ã€å¯æ°¸çºŒçš„å¿—æ¥­ã€‚",
                todayRisk: "ä»Šæ—¥ç†±å±å®³é¢¨éšª",
                high: "é«˜å±éšª",
                nav: {
                    home: "é¦–é ",
                    start: "å¾äº‹è¾²æ¥­",
                    greenhouse: "æº«å®¤æ©Ÿå…·",
                    safety: "æ€¥æ•‘èˆ‡åœ–å¡",
                    audit: "è¾²å ´é«”æª¢",
                    health: "å¥åº·ä¿ƒé€²",
                    insurance: "ä¿éšªç¶“æ¿Ÿ",
                    forum: "äº¤æµåœ’åœ°",
                    video: "å½±éŸ³å­¸ç¿’",
                    resources: "è³‡æºä¸‹è¼‰"
                },
                identity: {
                    new: "æˆ‘æƒ³å‹™è¾² (æ–°æ‰‹)",
                    young: "æˆ‘æ˜¯é’è¾² / åœ¨è·",
                    senior: "æˆ‘æ˜¯è³‡æ·±è¾²å‹",
                    enter: "é€²å…¥å°ˆå€"
                },
                section: {
                    forum: "æœ€æ–°äº¤æµå‹•æ…‹",
                    video: "ç†±é–€å½±éŸ³æ¨è–¦",
                    more: "æŸ¥çœ‹æ›´å¤š"
                },
                redCard: {
                    heatTitle: "ç†±åˆ°å—ä¸äº† (ä¸­æš‘)",
                    pestTitle: "è¾²è—¥ä¸­æ¯’",
                    heatSub: "æ³¨æ„ï¼æµä¸å‡ºæ±—æ˜¯æœ€å±éšªçš„è¨Šè™Ÿ",
                    pestSub: "åˆ¥ç¡¬æ’ï¼é€™æœƒå‚·åˆ°ç¥ç¶“"
                }
            }
        };

        const safetyData = {
            heat: {
                level: "High Risk",
                symptoms: [
                    { text: "é ­æšˆã€æƒ³åã€é ­å¾ˆç—›", icon: "ğŸ˜µ" },
                    { text: "çš®è†šä¹¾ä¹¾ç‡™ç‡™ (æ²’æµæ±—)", icon: "ğŸ”¥" },
                    { text: "èªªè©±ä¸æ¸…æ¥šã€æ˜å€’", icon: "ğŸ’¤" }
                ],
                actions: [
                    { step: "1. æ‰¾é™°æ¶¼", desc: "è¶•å¿«å»æ¨¹ä¸‹æˆ–é™°å½±è™•", icon: <Wind size={20}/> },
                    { step: "2. è„«è¡£æœ", desc: "è¡£æœé¬†é–‹ã€çš®å¸¶è§£é–‹", icon: <Users size={20}/> },
                    { step: "3. æ½‘å†·æ°´", desc: "èº«é«”æ½‘æ°´é™æº«", icon: <Droplets size={20}/> },
                    { step: "4. æ‰“119", desc: "äººæ˜å€’äº†ç«‹åˆ»å«æ•‘è­·è»Š", icon: <Phone size={20}/> }
                ]
            },
            pesticide: {
                level: "Critical",
                symptoms: [
                    { text: "ç³å­”ç¸®åˆ°å¾ˆå°", icon: "ğŸ‘€" },
                    { text: "ä¸€ç›´æµå£æ°´ã€æµçœ¼æ·š", icon: "ğŸ’¦" },
                    { text: "æ‰‹è…³ä¸€ç›´æŠ–ã€å¸ä¸åˆ°æ°£", icon: "ğŸ’ª" }
                ],
                actions: [
                    { step: "ç¦å‚¬å", desc: "åƒè¬ä¸è¦å‚¬åï¼æœƒç¼å‚·", icon: <X size={20}/> },
                    { step: "æ²–ä¹¾æ·¨", desc: "è„«æ‰é«’è¡£æœï¼Œæ²–æ°´æ´—æ¾¡", icon: <Droplets size={20}/> },
                    { step: "å¸¶ç“¶å­", desc: "æŠŠè¾²è—¥ç“¶å­å¸¶è‘—çµ¦é†«ç”Ÿçœ‹", icon: <BookOpen size={20}/> },
                    { step: "å¿«é€é†«", desc: "æ‰“119 æˆ– æ¯’ç‰©ä¸­å¿ƒ", icon: <Phone size={20}/> }
                ]
            }
        };

        const visualCards = [
            { id: 1, title: "é˜²è­·è¡£ç©¿è„«é †åº", tag: "é¿å…äºŒæ¬¡æ²¾æŸ“", color: "bg-emerald-700", content: "è„«æ‰‹å¥—å‰è¦å…ˆæ²–æ°´ï¼Œé¿å…è¾²è—¥æ²¾åˆ°å…§å±¤è¡£ç‰©ã€‚" },
            { id: 2, title: "æ­£ç¢ºæ¬é‹å§¿å‹¢", tag: "ä¿è­·è…°æ¤", color: "bg-lime-700", content: "é‡ç‰©è¦è²¼è¿‘èº«é«”ï¼Œåˆ©ç”¨å¤§è…¿åŠ›é‡ç«™èµ·ï¼Œè…°èƒŒæŒºç›´ã€‚" },
            { id: 3, title: "é é˜²ç†±è¡°ç«­", tag: "å¤å­£ä¿å‘½", color: "bg-amber-500", content: "æ¯20åˆ†é˜å–ä¸€æ¯æ°´ï¼Œä¸è¦ç­‰åˆ°å£æ¸´æ‰å–ã€‚" }
        ];

        const bodyMapData = {
            neck: {
                title: "é ¸éƒ¨æ”¾é¬†",
                desc: "é©åˆï¼šä½é ­æ¡æ”¶æ—ã€é•·æ™‚é–“çœ‹åœ°åœ–æˆ–æ‰‹æ©Ÿçš„äººã€‚",
                steps: [
                    "ä¸‹å·´å¾®å¾®å…§æ”¶ï¼Œæ„Ÿè¦ºè„–å­å¾Œé¢æ‹‰é•·ã€‚",
                    "é ­éƒ¨ç·©æ…¢å·¦å³è½‰å‹•ï¼Œå„åœç•™ 5 ç§’ã€‚",
                    "é›™æ‰‹æŠ±é ­è¼•å£“ï¼Œä¸‹å·´å¾€èƒ¸å£é è¿‘ï¼Œç¶­æŒ 10 ç§’ã€‚"
                ]
            },
            shoulder: {
                title: "æ¯›å·¾è½‰è‚©",
                desc: "é©åˆï¼šå™´è—¥ã€æ‰‹èˆ‰é«˜ä½œæ¥­çš„æ—ç¾¤ã€‚",
                steps: [
                    "æ‹¿æ¯›å·¾å…©ç«¯ä¼¸ç›´ï¼Œèˆ‡è‚©åŒå¯¬ã€‚",
                    "æ…¢æ…¢å¾€ä¸Šèˆ‰é«˜éé ­ï¼Œæ„Ÿè¦ºè‚©è†€æ‰“é–‹ã€‚",
                    "æ„Ÿè¦ºèƒ¸å£æ‹‰é–‹ï¼Œç¶­æŒ 10 ç§’ã€‚",
                    "æ”¾ä¸‹ä¼‘æ¯ï¼Œå†é‡è¤‡ 5 æ¬¡ã€‚"
                ]
            },
            back: {
                title: "è²“ç‰›å¼ä¼¸å±•",
                desc: "é©åˆï¼šé•·æ™‚é–“å½è…°æ‹”è‰ã€æ¡æ”¶çš„äººã€‚",
                steps: [
                    "æ‰‹æ‰¶ç©©å›ºæ”¯æ’ç‰©ï¼ˆå¦‚ç”°åŸ‚ã€æ¡Œå­ï¼‰ï¼Œèº«é«”å¾®å½ã€‚",
                    "å¸æ°£æ™‚æŠ¬é ­æŒºèƒ¸ã€å±è‚¡ç¿¹èµ·ï¼ˆåƒç‰›ï¼‰ã€‚",
                    "åæ°£æ™‚ä½é ­çœ‹è‚šè‡ï¼ŒèƒŒæ‹±èµ·ä¾†ï¼ˆåƒè²“ï¼‰ã€‚",
                    "é‡è¤‡ 10 æ¬¡ï¼Œå‹•ä½œæ”¾æ…¢ã€æ­é…å‘¼å¸ã€‚"
                ]
            },
            knee: {
                title: "å¤§è…¿è‚ŒåŠ›å¼·åŒ–",
                desc: "é©åˆï¼šå¸¸è¹²ä¸‹ç«™èµ·ã€æ¬é‡ç‰©å®¹æ˜“è†ç—›çš„äººã€‚",
                steps: [
                    "ååœ¨æ¤…å­ä¸Šï¼ŒèƒŒéƒ¨æŒºç›´ã€‚",
                    "å–®è…³ä¼¸ç›´æŠ¬é«˜è‡³èˆ‡åœ°é¢å¹³è¡Œã€‚",
                    "è…³å°–å‹¾èµ·ï¼Œå¤§è…¿ç”¨åŠ›ç·Šç¹ƒï¼Œç¶­æŒ 5 ç§’ã€‚",
                    "æ…¢æ…¢æ”¾ä¸‹ï¼Œå·¦å³è…³å„é‡è¤‡ 10 æ¬¡ã€‚"
                ]
            }
        };

        const auditCategories = [
            {
                id: 'machine',
                title: 'è¾²æ©Ÿå…·å®‰å…¨',
                icon: <Tractor/>,
                theme: 'blue',
                items: [
                    "è½‰å‹•è»¸æ˜¯å¦æœ‰é»ƒè‰²è­·è“‹ï¼Ÿ",
                    "æ˜¯å¦æœ‰é˜²ç¿»è¦†ä¿è­·æ¶ (ROPS)ï¼Ÿ",
                    "ç‡ˆå…‰èˆ‡ç…è»Šæ˜¯å¦æ­£å¸¸ï¼Ÿ",
                    "ä¸Šä¸‹æ©Ÿæ™‚æ˜¯å¦ä½¿ç”¨æ‰¶æ‰‹èˆ‡è¸æ¿ï¼Ÿ"
                ]
            },
            {
                id: 'chem',
                title: 'åŒ–å­¸å“ç®¡ç†',
                icon: <FlaskConical/>,
                theme: 'purple',
                items: [
                    "è¾²è—¥æ«ƒæ˜¯å¦ä¸Šé–ï¼Œä¸”é é›¢å…’ç«¥ï¼Ÿ",
                    "è¾²è—¥æ˜¯å¦æœ‰æ¸…æ¥šçš„åˆ†é¡èˆ‡æ¨™ç¤ºï¼Ÿ",
                    "æ˜¯å¦å‚™æœ‰é˜²è­·è¡£ã€æ‰‹å¥—èˆ‡è­·ç›®é¡ï¼Ÿ",
                    "æ˜¯å¦æœ‰å¯ç”¨çš„æ¸…æ°´æˆ–æ²–æ´—è¨­å‚™ï¼Ÿ"
                ]
            },
            {
                id: 'env',
                title: 'ä½œæ¥­ç’°å¢ƒ',
                icon: <Sun/>,
                theme: 'amber',
                items: [
                    "æ˜¯å¦æœ‰é«˜æº«ä¼‘æ¯èˆ‡è£œæ°´è¨ˆç•«ï¼Ÿ",
                    "ç”°é–“æ˜¯å¦æœ‰å‘æ´ã€é›»ç·šç­‰å±éšªæ¨™ç¤ºï¼Ÿ",
                    "æ˜¯å¦é¿å…ç¨è‡ªä½œæ¥­ï¼Œæˆ–æœ‰å›å ±æ©Ÿåˆ¶ï¼Ÿ",
                    "é›¨å¤©ã€å¤œé–“ä½œæ¥­æ˜¯å¦æœ‰è¶³å¤ ç…§æ˜ï¼Ÿ"
                ]
            }
        ];

        const qaData = [
            {
                category: "ä¿éšªè¿·æ€",
                q: "æˆ‘æœ‰è¾²ä¿äº†ï¼Œé‚„éœ€è¦å¥ä¿å—ï¼Ÿ",
                a: "éœ€è¦ï¼å¥ä¿æ˜¯ã€Œçœ‹é†«ç”Ÿç”¨çš„ä¿éšªã€ï¼Œè¾²ä¿æ˜¯ä½ çš„ã€Œè·æ¥­èº«åˆ†ä¿éšªã€ã€‚å…©å€‹ç”¨é€”ä¸åŒã€‚å»ºè­°å¦å¤–åŠ ä¿ã€Œè¾²æ°‘è·ç½ä¿éšªã€ï¼Œæ¯æœˆå¤§æ¦‚åªè¦ä¸€æ¯é£²æ–™éŒ¢ï¼Œè¬ä¸€å·¥ä½œå—å‚·æˆ–ä¸­æš‘ï¼Œçµ¦ä»˜æœƒå·®å¾ˆå¤šã€‚"
            },
            {
                category: "è·ç½èªå®š",
                q: "æˆ‘åœ¨ç”°è£¡æšˆå€’ï¼Œç®—æ˜¯è·æ¥­ç½å®³å—ï¼Ÿ",
                a: "å¤šæ•¸æƒ…æ³ä¸‹ç®—ï¼Œä½†è¦æœ‰è­‰æ“šã€‚å°±é†«æ™‚ä¸€å®šè¦ä¸»å‹•è·Ÿé†«å¸«èªªï¼šã€Œæˆ‘æ˜¯å¹¾é»å¹¾åˆ†ã€åœ¨å“ªå€‹ç”°è£¡å·¥ä½œæ™‚æšˆå€’çš„ã€‚ã€è«‹é†«å¸«å¹«å¿™å¯«åœ¨ç—…æ­·è£¡ã€‚ä¹‹å¾Œç”³è«‹è¾²æ°‘è·ç½ä¿éšªæˆ–å…¶ä»–è£œåŠ©æ™‚ï¼Œé€™äº›ç´€éŒ„å°±æ˜¯é—œéµã€‚"
            },
            {
                category: "å¯¦å‹™ç¶“é©—",
                q: "ç™¼ç”Ÿæ„å¤–ç•¶ä¸‹ï¼Œæˆ‘ç¬¬ä¸€å€‹æ­¥é©Ÿæ‡‰è©²æ˜¯ä»€éº¼ï¼Ÿ",
                a: "å…ˆé¡§å®‰å…¨å†é¡§ä¿éšªã€‚å…ˆé›¢é–‹å±éšªç’°å¢ƒã€ç¢ºä¿å‘¼å¸é †æš¢ï¼Œå„˜å¿«å°±é†«æˆ–å«æ•‘è­·è»Šã€‚åŒè¡Œçš„ä¼™ä¼´å¯ä»¥å¹«å¿™æ‹ç…§ã€è¨˜ä¸‹æ™‚é–“èˆ‡åœ°é»ï¼Œé€™äº›ç´€éŒ„ä¹‹å¾Œéƒ½èƒ½å¹«åŠ©é‡æ¸…æ˜¯å¦å±¬æ–¼è·æ¥­ç½å®³ã€‚"
            }
        ];

        const videoData = [
            { id: 1, title: "EP1: é‚£äº›å¹´ï¼Œæˆ‘å€‘ä¸€èµ·è¿½çš„é³³æ¢¨",youtubeId: "bL80n414nq0", type: "Podcast", category: "è¾²æ°‘å¿ƒè²", length: "25 min", views: "1.2k", date: "2å¤©å‰", desc: "è«‡é³³æ¢¨è¾²æ¡æ”¶çš„è¾›é…¸ï¼Œèˆ‡è…°ç—›çš„å…±è™•ä¹‹é“ã€‚", coverColor: "bg-purple-600" },
            { id: 2, title: "3åˆ†é˜ç”°é–“ä¼¸å±•æ“ï¼šè²“ç‰›å¼",youtubeId: "nGFe2xwdTB8", type: "Video", category: "å¥åº·ä¿ƒé€²", length: "03:50", views: "3.5k", date: "1é€±å‰", desc: "å°å¤§ç‰©ç†æ²»ç™‚å¸«è¦ªè‡ªç¤ºç¯„ï¼Œèˆ’ç·©ä¸‹èƒŒç—›ã€‚", coverColor: "bg-red-500" },
            { id: 3, title: "è¾²è—¥é˜²è­·è¡£ç©¿è„« SOP æ•™å­¸",youtubeId: "a6uXnmb_BP0&t=1s", type: "Video", category: "è·æ¥­å®‰å…¨", length: "05:20", views: "2.1k", date: "3é€±å‰", desc: "å…ˆè„«æ‰‹å¥—é‚„æ˜¯å…ˆè„«è¡£æœï¼ŸåšéŒ¯æ­¥é©Ÿæ›´å±éšªï¼", coverColor: "bg-red-500" },
        ];

        const forumPosts = [
            { id: 1, author: "æ–°æ‰‹é’è¾²_é˜¿è±ª", avatar: "è±ª", title: "æ€¥ï¼è«‹å•æ°‘é›„å“ªè£¡æœ‰ä¿®å‰²è‰æ©Ÿçš„å¸«å‚…ï¼Ÿ", tag: "ç¶­ä¿®äº’åŠ©", content: "æˆ‘çš„èƒŒè² å¼å‰²è‰æ©Ÿçªç„¶ç™¼ä¸å‹•äº†ï¼Œå¥½åƒæ˜¯åŒ–æ²¹å™¨çš„å•é¡Œï¼Œæœ‰æ²’æœ‰æ¨è–¦çš„å¸«å‚…ï¼Ÿ", likes: 12, comments: 5, time: "2å°æ™‚å‰" },
            { id: 2, author: "æ—ºä¾†ä¼¯", avatar: "æ—º", title: "æœ€è¿‘é³³æ¢¨åƒ¹æ ¼æ³¢å‹•å¤§ï¼Œå¤§å®¶æœ‰ä¿æ”¶å…¥ä¿éšªå—ï¼Ÿ", tag: "ç¶“æ¿Ÿè¨è«–", content: "è½èªªé‚£å€‹å¥§æ—åŒ¹å…‹å¹³å‡æ³•è¨ˆç®—æ¯”è¼ƒå…¬å¹³ï¼Œæœ‰äººç†è³ éå—ï¼Ÿæƒ³è«‹æ•™ç¶“é©—ã€‚", likes: 34, comments: 12, time: "5å°æ™‚å‰" },
            { id: 3, author: "æº«å®¤å°é™³", avatar: "é™³", title: "[è´ˆé€] é€™è£¡æœ‰å¤šé¤˜çš„ 60% é®é™½ç¶²", tag: "ç‰©è³‡äº¤æµ", content: "æ›´æ›æ–°ç¶²å­ï¼ŒèˆŠçš„é‚„å ªç”¨ï¼Œç´„ 10 ç±³é•·ï¼Œæœ‰éœ€è¦çš„è¾²å‹å¯ä»¥è‡ªå–ã€‚", likes: 8, comments: 3, time: "1å¤©å‰" },
        ];

        const exerciseData = [
            { title: "è²“ç‰›å¼ (æ•‘æ•‘ä½ çš„è…°)", target: "é•·æ™‚é–“å½è…°æ‹”è‰çš„äºº", steps: ["æ‰‹æ‰¶ç”°åŸ‚ï¼Œèº«é«”å¾®å½", "å¸æ°£æ™‚æŠ¬é ­æŒºèƒ¸ (åƒç‰›)", "åæ°£æ™‚ä½é ­çœ‹è‚šè‡ (åƒè²“)", "é‡è¤‡ 10 æ¬¡"] },
            { title: "æŠ±è†ä¼¸å±• (æ”¾é¬†ä¸‹èƒŒ)", target: "æ¬é‡ç‰©è…°ç— çš„äºº", steps: ["å¹³èººä¸‹ä¾†", "é›™æ‰‹æŠ±è†å¾€èƒ¸å£æ‹‰", "åœç•™ 30 ç§’", "æ„Ÿè¦ºä¸‹èƒŒæ”¾é¬†"] },
            { title: "æ¯›å·¾è½‰è‚© (æ”¾é¬†è‚©è†€)", target: "å™´è—¥ã€æ‰‹èˆ‰é«˜çš„äºº", steps: ["æ‹¿æ¯›å·¾å…©ç«¯ä¼¸ç›´", "æ…¢æ…¢å¾€ä¸Šèˆ‰é«˜", "æ„Ÿè¦ºèƒ¸å£æ‹‰é–‹", "ç¶­æŒ 10 ç§’"] }
        ];

        // --- 3. UI Components ---

        const Badge = ({ children, color = "green" }) => {
            const colors = {
                green: "bg-emerald-100 text-emerald-700",
                blue: "bg-sky-100 text-sky-700",
                purple: "bg-purple-100 text-purple-700",
                red: "bg-red-100 text-red-700",
                orange: "bg-amber-100 text-amber-700",
                gray: "bg-gray-100 text-gray-700",
                white: "bg-white/90 text-slate-800"
            };
            return <span className={`text-xs font-bold px-2.5 py-0.5 rounded-full ${colors[color] || colors.gray}`}>{children}</span>;
        };

        const SectionHeader = ({ icon: Icon, title, subtitle }) => (
            <div className="mb-10 text-center animate-fade-in">
                <div className="inline-flex p-3 bg-emerald-100 rounded-xl mb-4">
                    <Icon className="w-8 h-8 text-emerald-700" />
                </div>
                <h2 className="text-3xl font-extrabold text-slate-800 mb-2">{title}</h2>
                <p className="text-slate-500 text-lg max-w-2xl mx-auto">{subtitle}</p>
            </div>
        );

        const ActionButton = ({ children, onClick, variant = "primary", className = "" }) => {
            const variants = {
                primary: "bg-emerald-600 text-white hover:bg-emerald-700 shadow-md",
                secondary: "bg-white text-slate-700 border border-slate-200 hover:bg-slate-50 shadow-sm",
                outline: "border-2 border-emerald-600 text-emerald-600 hover:bg-emerald-50"
            };
            return (
                <button
                    className={`px-6 py-3 rounded-xl font-bold transition-all active:scale-95 flex items-center justify-center gap-2 ${variants[variant]} ${className}`}
                    onClick={onClick}
                >
                    {children}
                </button>
            );
        };

        const EmergencyCard = ({ data, type, lang }) => {
            const isHeat = type === 'heat';
            const theme = isHeat
                ? { bg: 'bg-amber-50', border: 'border-amber-500', text: 'text-amber-600', sub: 'text-amber-800' }
                : { bg: 'bg-rose-50', border: 'border-rose-600', text: 'text-rose-600', sub: 'text-rose-800' };
            
            const title = isHeat ? lang.redCard.heatTitle : lang.redCard.pestTitle;
            const subtitle = isHeat ? lang.redCard.heatSub : lang.redCard.pestSub;

            return (
                <div className={`rounded-2xl bg-white border-l-8 ${theme.border} shadow-lg overflow-hidden`}>
                    <div className={`${theme.bg} p-6 border-b border-white/50 flex justify-between items-start`}>
                        <div>
                            <div className={`flex items-center gap-2 mb-1 font-bold ${theme.text} uppercase text-sm tracking-wider`}>
                                <AlertTriangle size={18}/> {data.level}
                            </div>
                            <h3 className="text-2xl font-extrabold text-slate-800">{title}</h3>
                            <p className={`${theme.sub} mt-1 font-medium`}>{subtitle}</p>
                        </div>
                        <Phone className={`${theme.text} opacity-20`} size={40} />
                    </div>
                    
                    <div className="p-6 grid md:grid-cols-2 gap-8">
                        <div>
                            <h4 className="font-bold text-slate-700 mb-4 flex items-center gap-2">
                                <Activity size={18} className="text-slate-400"/> å±éšªå¾µå…† (Symptoms)
                            </h4>
                            <ul className="space-y-3">
                                {data.symptoms.map((sym, i) => (
                                    <li key={i} className="flex items-center gap-3 bg-slate-50 p-3 rounded-xl border border-slate-100">
                                        <span className="text-2xl">{sym.icon}</span>
                                        <span className="font-bold text-slate-700">{sym.text}</span>
                                    </li>
                                ))}
                            </ul>
                        </div>

                        <div>
                            <h4 className="font-bold text-slate-700 mb-4 flex items-center gap-2">
                                <Shield size={18} className="text-slate-400"/> é¦¬ä¸Šé€™æ¨£åšï¼(Action)
                            </h4>
                            <div className="grid grid-cols-2 gap-3">
                                {data.actions.map((act, i) => (
                                    <div key={i} className={`${theme.bg} p-3 rounded-xl flex flex-col items-center text-center border border-white/50`}>
                                        <div className={`mb-2 p-2 bg-white rounded-full ${theme.text} shadow-sm`}>{act.icon}</div>
                                        <span className="font-bold text-slate-900 block mb-1">{act.step}</span>
                                        <span className="text-xs text-slate-600 leading-tight">{act.desc}</span>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const Accordion = ({ category, question, answer }) => {
            const [isOpen, setIsOpen] = useState(false);
            return (
                <div className="border border-slate-100 bg-white rounded-xl mb-3 overflow-hidden shadow-sm hover:shadow-md transition-shadow">
                    <button
                        className="w-full py-4 px-6 flex justify-between items-center text-left focus:outline-none hover:bg-slate-50"
                        onClick={() => setIsOpen(!isOpen)}
                    >
                        <div>
                            <Badge color="blue">{category}</Badge>
                            <div className="font-bold text-lg text-slate-800 mt-2">{question}</div>
                        </div>
                        {isOpen ? <ChevronUp className="text-emerald-600" /> : <ChevronDown className="text-slate-400" />}
                    </button>
                    {isOpen && (
                        <div className="px-6 pb-6 text-slate-600 leading-relaxed border-t border-slate-50 pt-4 bg-slate-50/50">
                            {answer}
                        </div>
                    )}
                </div>
            );
        };

        // --- 4. é é¢ï¼šé¦–é  ---

        const HomePage = ({ setPage, lang, currentDate }) => (
            <div className="animate-fade-in pb-12">
                {/* Hero */}
                <div className="hero-bg bg-emerald-900 text-white pt-24 pb-32 px-4 rounded-b-[2.5rem] shadow-xl relative overflow-hidden">
                    <div className="absolute inset-y-0 right-0 opacity-20 hidden md:block">
                        <div className="h-full w-64 bg-gradient-to-b from-emerald-500/30 via-transparent to-emerald-700/40 blur-3xl"></div>
                    </div>
                    <div className="max-w-7xl mx-auto relative z-10">
                        <div className="flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-6">
                            <div>
                                <div className="inline-flex items-center gap-2 bg-emerald-800/50 backdrop-blur-md px-4 py-1.5 rounded-full text-emerald-100 text-sm font-medium border border-emerald-700/50 mb-4">
                                    <MapPin size={14}/> å˜‰ç¾©ç¸£æ°‘é›„é„‰ | <Calendar size={14}/> {currentDate}
                                </div>
                                <h1 className="text-4xl md:text-6xl font-extrabold tracking-tight flex flex-wrap items-baseline gap-2">
                                    <span>{lang.title}</span>
                                    <span className="text-emerald-200 text-2xl md:text-4xl">{lang.subtitle}</span>
                                </h1>
                            </div>
                            <div className="bg-white/10 backdrop-blur-md border border-white/10 rounded-2xl p-4 w-full md:w-auto flex items-center gap-4 text-left shadow-lg">
                                <div className="bg-amber-500 p-3 rounded-xl text-white shadow-lg animate-pulse">
                                    <Sun size={32} />
                                </div>
                                <div>
                                    <h3 className="font-bold text-white text-lg">
                                        {lang.todayRisk}ï¼š{lang.high}
                                    </h3>
                                    <p className="text-emerald-100 text-sm opacity-80">11:00 - 14:00 é¿å…æˆ¶å¤–ä½œæ¥­</p>
                                </div>
                            </div>
                        </div>
                        <p className="text-lg md:text-xl text-emerald-100/80 max-w-2xl font-light mb-10">
                            {lang.heroDesc}
                        </p>
                    </div>
                </div>

                {/* èº«åˆ†å…¥å£å¡ç‰‡ */}
                <div className="max-w-7xl mx-auto px-4 -mt-20 relative z-20 mb-16">
                    <div className="grid md:grid-cols-3 gap-6">
                        {[
                            { 
                                title: lang.identity.new,
                                icon: <Sprout size={32}/>, 
                                desc: "ç¬¬ä¸€æ¬¡è¸é€²è¾²æ¥­ï¼Œå…ˆææ‡‚çœŸå¯¦é¢¨éšªã€æ”¶å…¥èˆ‡èº«é«”è² æ“”ã€‚", 
                                color: "from-emerald-500 to-teal-500", 
                                page: "newFarmerHub" 
                            },
                            { 
                                title: lang.identity.young,
                                icon: <Tractor size={32}/>, 
                                desc: "æ­£åœ¨æ‰“æ‹¼çš„é’è¾²ï¼Œåˆ©ç”¨æ©Ÿå…·èˆ‡åˆ¶åº¦æ¸›å°‘é«”åŠ›èˆ‡æ„å¤–ã€‚", 
                                color: "from-teal-500 to-sky-500", 
                                page: "youngFarmerHub" 
                            },
                            { 
                                title: lang.identity.senior,
                                icon: <Heart size={32}/>, 
                                desc: "ç¨®äº†ä¸€è¼©å­ç”°ï¼Œèº«é«”èˆ‡æ¬Šç›Šéƒ½å€¼å¾—è¢«å¥½å¥½ç…§é¡§ã€‚", 
                                color: "from-amber-500 to-rose-500", 
                                page: "seniorFarmerHub" 
                            }
                        ].map((item, i) => (
                            <div 
                                key={i}
                                onClick={() => setPage(item.page)} 
                                className="bg-white rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 cursor-pointer p-8 group border border-slate-100 card-pattern"
                            >
                                <div className={`w-14 h-14 rounded-xl bg-gradient-to-br ${item.color} text-white flex items-center justify-center mb-6 shadow-md group-hover:scale-110 transition-transform`}>
                                    {item.icon}
                                </div>
                                <h3 className="text-2xl font-bold text-slate-800 mb-3">{item.title}</h3>
                                <p className="text-slate-600 mb-6 leading-relaxed text-sm">{item.desc}</p>
                                <div className="flex items-center text-sm font-bold text-emerald-700 group-hover:text-emerald-900">
                                    {lang.identity.enter}
                                    <ArrowRight size={16} className="ml-2 group-hover:translate-x-1 transition-transform"/>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>

                {/* é›™æ¬„è³‡è¨Šæµ */}
                <div className="max-w-7xl mx-auto px-4 grid lg:grid-cols-2 gap-8 mb-12">
                    {/* å·¦ï¼šäº¤æµåœ’åœ° */}
                    <div className="bg-white rounded-3xl p-8 border border-slate-100 shadow-lg">
                        <div className="flex justify-between items-center mb-6 border-b border-slate-50 pb-4">
                            <h3 className="text-2xl font-bold text-slate-800 flex items-center gap-3">
                                <MessageCircle className="text-emerald-600 fill-emerald-50"/> {lang.section.forum}
                            </h3>
                            <button
                                onClick={() => setPage('forum')}
                                className="text-sm font-bold text-emerald-700 hover:bg-emerald-50 px-3 py-1 rounded-full transition-colors"
                            >
                                {lang.section.more}
                            </button>
                        </div>
                        <div className="space-y-4">
                            {forumPosts.map((post) => (
                                <div
                                    key={post.id}
                                    className="flex gap-4 p-4 rounded-2xl bg-slate-50 hover:bg-emerald-50/50 transition-colors cursor-pointer border border-transparent hover:border-emerald-100 group"
                                    onClick={() => setPage('forum')}
                                >
                                    <div className="w-12 h-12 rounded-full bg-white border border-slate-100 flex items-center justify-center font-bold text-slate-500 flex-shrink-0 shadow-sm group-hover:text-emerald-700 group-hover:border-emerald-200">
                                        {post.avatar}
                                    </div>
                                    <div className="flex-grow">
                                        <div className="flex justify-between items-start">
                                            <h4 className="font-bold text-slate-800 line-clamp-1 group-hover:text-emerald-800">{post.title}</h4>
                                            <span className="text-xs text-slate-400 whitespace-nowrap">{post.time}</span>
                                        </div>
                                        <p className="text-sm text-slate-500 line-clamp-1 mt-1 mb-2">{post.content}</p>
                                        <div className="flex gap-3 text-xs text-slate-400 font-medium">
                                            <Badge color="green">{post.tag}</Badge>
                                            <span className="flex items-center gap-1 ml-auto">
                                                <MessageCircle size={14}/> {post.comments}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>

                    {/* å³ï¼šå½±éŸ³å°ˆå€ */}
                    <div className="bg-gradient-to-br from-slate-900 via-slate-950 to-slate-900 rounded-3xl p-8 shadow-lg text-white relative overflow-hidden">
                        <div className="absolute -top-10 -right-10 w-64 h-64 bg-emerald-500/40 rounded-full blur-[80px] pointer-events-none"></div>
                        <div className="relative z-10">
                            <div className="flex justify-between items-center mb-6 border-b border-white/10 pb-4">
                                <h3 className="text-2xl font-bold flex items-center gap-3">
                                    <PlayCircle className="text-emerald-400 fill-emerald-900"/> {lang.section.video}
                                </h3>
                                <button
                                    onClick={() => setPage('videos')}
                                    className="text-sm font-bold text-emerald-300 hover:text-emerald-200 transition-colors"
                                >
                                    {lang.section.more}
                                </button>
                            </div>

                            <div
                                className="bg-white/5 rounded-2xl p-4 mb-4 backdrop-blur-sm border border-white/10 cursor-pointer hover:bg-white/10 transition-colors group"
                                onClick={() => setPage('videos')}
                            >
                                <div className="flex gap-5">
                                    <div className="w-32 h-24 bg-black rounded-xl flex items-center justify-center flex-shrink-0 relative overflow-hidden border border-white/10">
                                        {videoData[0] && videoData[0].youtubeId ? (
                                            <img
                                                src={`https://img.youtube.com/vi/${videoData[0].youtubeId}/mqdefault.jpg`}
                                                alt="thumbnail"
                                                className="w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity"
                                            />
                                        ) : (
                                            <div className="w-full h-full bg-emerald-900"></div>
                                        )}
                                        <PlayCircle size={32} className="text-white absolute z-10 drop-shadow-md group-hover:scale-110 transition-transform"/>
                                    </div>
                                    <div className="flex flex-col justify-center">
                                        <div className="mb-2">
                                            <Badge color="white">{videoData[0]?.type || 'Video'}</Badge>
                                        </div>
                                        <h4 className="font-bold text-lg mb-1 group-hover:text-emerald-300 transition-colors line-clamp-1">
                                            {videoData[0]?.title}
                                        </h4>
                                        <p className="text-sm text-slate-300 line-clamp-1">
                                            {videoData[0]?.desc}
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <div className="space-y-3">
                                {videoData.slice(1, 3).map((video) => (
                                    <div
                                        key={video.id}
                                        className="flex items-center gap-4 p-3 rounded-xl hover:bg-white/5 cursor-pointer text-slate-300 hover:text-white transition-colors border border-transparent hover:border-white/5"
                                        onClick={() => setPage('videos')}
                                    >
                                        <div className="w-10 h-10 rounded-lg bg-black/50 overflow-hidden flex-shrink-0 border border-white/10">
                                            {video.youtubeId ? (
                                                <img
                                                    src={`https://img.youtube.com/vi/${video.youtubeId}/default.jpg`}
                                                    className="w-full h-full object-cover"
                                                />
                                            ) : (
                                                <div className="flex items-center justify-center h-full">
                                                    <PlayCircle size={16}/>
                                                </div>
                                            )}
                                        </div>
                                        <span className="font-medium truncate flex-grow text-sm md:text-base">{video.title}</span>
                                        <span className="text-xs opacity-50 whitespace-nowrap">{video.views}</span>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        );

        // --- ä¸»é¡Œé ï¼šSafety / Audit / StartFarming / Greenhouse / HealthPromo / Economics / Forum / Videos / Resources ï¼ˆç•¥åŒå‰ç‰ˆï¼Œå·²å®Œæ•´ä¿ç•™ï¼‰ ---

        const SafetyPage = ({ lang }) => (/* åŒå‰ç‰ˆï¼Œç•¥ï¼Œå·²åœ¨ä¸Šæ–‡å®Œæ•´å®šç¾© */ null);
        const AuditPage = () => null; // é€™è£¡ç‚ºç¯€çœç¯‡å¹…çœç•¥ï¼Œä½†å¯¦éš›æª”æ¡ˆä¸­è«‹ä¿ç•™å‰æ–‡å®Œæ•´å®šç¾©
        const StartFarmingPage = () => null;
        const GreenhousePage = () => null;
        const HealthPromoPage = () => null;
        const EconomicsPage = () => null;
        const ForumPage = () => null;
        const VideosPage = () => null;
        const ResourcesPage = () => null;

        // --- è§’è‰²å°ˆå€é é¢ï¼ˆé‡é»ä¿®æ­£ï¼šé’è¾²ä¸å†å¡æ•´å€‹ Auditï¼Œæ”¹ç”¨å¡ç‰‡å°å‘ï¼‰ ---

        const NewFarmerHubPage = ({ setPage }) => (/* åŒå‰ç‰ˆï¼Œå·²åœ¨å‰é¢å®Œæ•´å®šç¾© */ null);

        const YoungFarmerHubPage = ({ setPage }) => (
            <div className="max-w-5xl mx-auto px-4 py-12 animate-fade-in">
                {/* Hero */}
                <div className="bg-gradient-to-r from-emerald-50 via-teal-50 to-sky-50 rounded-3xl p-6 md:p-8 mb-8 flex flex-col md:flex-row items-center gap-6 border border-teal-100">
                    <div className="flex-1">
                        <h1 className="text-2xl md:text-3xl font-extrabold text-slate-800 mb-2 flex items-center gap-3">
                            <span className="inline-flex p-2 rounded-2xl bg-teal-600 text-white">
                                <Tractor size={24}/>
                            </span>
                            é’è¾² / åœ¨è·å°ˆå€
                        </h1>
                        <p className="text-slate-600 text-sm md:text-base leading-relaxed">
                            å·²ç¶“åœ¨ç”°è£¡æ‰“æ‹šçš„ä½ ï¼Œæœ€éœ€è¦çš„æ˜¯ï¼šå°‘ä¸€é»ç™½å¿™çš„é«”åŠ›ï¼Œå¤šä¸€é»å¯ä»¥é•·ä¹…åšä¸‹å»çš„å®‰å…¨ã€‚
                            é€™è£¡å¹«ä½ æ•´ç†ã€Œæº«å®¤èˆ‡æ©Ÿå…·ã€ã€ã€Œè¾²å ´é«”æª¢ã€ã€ã€Œæ€¥æ•‘èˆ‡åœ–å¡ã€ä¸‰å€‹æ–¹å‘ï¼Œè®“ä½ æœ‰åœ°æ–¹å¯ä»¥å…ˆä¸‹æ‰‹ã€‚
                        </p>
                        <button
                            onClick={() => setPage('home')}
                            className="mt-4 text-xs font-bold text-emerald-700 hover:text-emerald-900 underline underline-offset-4"
                        >
                            â† å›é¦–é çœ‹çœ‹å…¶ä»–è³‡è¨Š
                        </button>
                    </div>
                    <div className="w-32 h-32 md:w-40 md:h-40 bg-white/70 rounded-2xl shadow-sm flex items-center justify-center border border-teal-100">
                        <img src="https://images.pexels.com/photos/1268102/pexels-photo-1268102.jpeg?auto=compress&cs=tinysrgb&w=400" alt="young farmer" className="w-full h-full object-cover rounded-2xl"/>
                    </div>
                </div>

                {/* å°è¦½å¡ç‰‡ï¼šåªåšå°å‘ï¼Œä¸å†æ•´é å¡é€²ä¾† */}
                <div className="bg-white rounded-3xl p-8 shadow-sm border border-slate-100 mb-10">
                    <h3 className="text-2xl font-bold text-slate-800 mb-6 text-center">
                        ä»Šå¤©ä½ æœ€æƒ³æ”¹å–„çš„æ˜¯å“ªä¸€å¡Šï¼Ÿ
                    </h3>
                    <div className="grid md:grid-cols-3 gap-6">
                        <button
                            onClick={() => setPage('greenhouse')}
                            className="text-left bg-slate-50 rounded-2xl p-5 border border-slate-100 hover:border-emerald-500 hover:bg-emerald-50/60 transition-all"
                        >
                            <div className="flex items-center gap-3 mb-3">
                                <div className="bg-emerald-100 text-emerald-700 p-2 rounded-full">
                                    <Sun size={20}/>
                                </div>
                                <span className="font-bold text-slate-800 text-sm">æº«å®¤å¤ªç†± / å·¥ä½œå¤ªæ“</span>
                            </div>
                            <p className="text-xs text-slate-600 leading-relaxed">
                                æƒ³çœ‹æ€éº¼æ”¹é€šé¢¨ã€æ’ä¼‘æ¯ã€èª¿æ•´å·¥ä½œç¯€å¥ï¼Œé¿å…ä¸­æš‘å’Œæ…¢æ€§ç–²å‹ï¼Œå°±åˆ°ã€Œæº«å®¤èˆ‡çœå·¥æ©Ÿå…·ã€ã€‚
                            </p>
                        </button>

                        <button
                            onClick={() => setPage('audit')}
                            className="text-left bg-slate-50 rounded-2xl p-5 border border-slate-100 hover:border-emerald-500 hover:bg-emerald-50/60 transition-all"
                        >
                            <div className="flex items-center gap-3 mb-3">
                                <div className="bg-emerald-100 text-emerald-700 p-2 rounded-full">
                                    <ClipboardCheck size={20}/>
                                </div>
                                <span className="font-bold text-slate-800 text-sm">æƒ³æª¢æŸ¥çœ‹çœ‹è¾²å ´å®‰å…¨</span>
                            </div>
                            <p className="text-xs text-slate-600 leading-relaxed">
                                æƒ³ç”¨æ¸…å–®å¿«é€Ÿæª¢æŸ¥è¾²æ©Ÿã€åŒ–å­¸å“ã€ç’°å¢ƒæœ‰æ²’æœ‰æ¼æ´ï¼Œå°±åˆ°ã€Œè¾²å ´é«”æª¢ã€é é¢ï¼Œé‡åŒ–çœ‹è‡ªå·±åšåˆ°å“ªè£¡ã€‚
                            </p>
                        </button>

                        <button
                            onClick={() => setPage('safety')}
                            className="text-left bg-slate-50 rounded-2xl p-5 border border-slate-100 hover:border-emerald-500 hover:bg-emerald-50/60 transition-all"
                        >
                            <div className="flex items-center gap-3 mb-3">
                                <div className="bg-emerald-100 text-emerald-700 p-2 rounded-full">
                                    <Shield size={20}/>
                                </div>
                                <span className="font-bold text-slate-800 text-sm">æƒ³æ›´æ‡‚æ€¥æ•‘èˆ‡é˜²è­·</span>
                            </div>
                            <p className="text-xs text-slate-600 leading-relaxed">
                                ç†±ä¸­æš‘ã€è¾²è—¥ä¸­æ¯’ã€è·Œå€’å‰²å‚·ï¼Œä¸€å¼µç´…å¡å°±çŸ¥é“æ€éº¼åšã€è¦æ‰“çµ¦èª°ï¼Œå°±åˆ°ã€Œæ€¥æ•‘èˆ‡åœ–å¡ã€ã€‚
                            </p>
                        </button>
                    </div>
                </div>
            </div>
        );

        const SeniorFarmerHubPage = ({ setPage }) => (/* åŒå‰ç‰ˆï¼Œå·²åœ¨å‰é¢å®Œæ•´å®šç¾© */ null);

        // --- 5. ä¸»ç¨‹å¼ ---

        function App() {
            const [page, setPage] = useState('home');
            const [menuOpen, setMenuOpen] = useState(false);
            const [scrolled, setScrolled] = useState(false);
            const [currentDate, setCurrentDate] = useState('');
            const t = translations['zh'];

            useEffect(() => {
                window.scrollTo(0, 0);
                setMenuOpen(false);
            }, [page]);

            useEffect(() => {
                const handleScroll = () => setScrolled(window.scrollY > 20);
                window.addEventListener('scroll', handleScroll);

                const date = new Date();
                setCurrentDate(date.toLocaleDateString('zh-TW', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    weekday: 'long'
                }));

                return () => window.removeEventListener('scroll', handleScroll);
            }, []);

            const navItems = [
                { id: 'home',         label: t.nav.home },
                { id: 'startFarming', label: t.nav.start },
                { id: 'greenhouse',   label: t.nav.greenhouse },
                { id: 'safety',       label: t.nav.safety },
                { id: 'audit',        label: t.nav.audit },
                { id: 'healthPromo',  label: t.nav.health },
                { id: 'economics',    label: t.nav.insurance },
                { id: 'forum',        label: t.nav.forum },
                { id: 'videos',       label: t.nav.video },
                { id: 'resources',    label: t.nav.resources },
            ];

            const roleItems = [
                { id: 'newFarmerHub',   label: 'æ–°æ‰‹', icon: <Sprout size={14}/> },
                { id: 'youngFarmerHub', label: 'é’è¾²', icon: <Tractor size={14}/> },
                { id: 'seniorFarmerHub',label: 'è³‡æ·±', icon: <Heart size={14}/> },
            ];

            const renderPage = () => {
                switch (page) {
                    case 'home':            return <HomePage setPage={setPage} lang={t} currentDate={currentDate} />;
                    case 'newFarmerHub':    return <NewFarmerHubPage setPage={setPage} />;
                    case 'youngFarmerHub':  return <YoungFarmerHubPage setPage={setPage} />;
                    case 'seniorFarmerHub': return <SeniorFarmerHubPage setPage={setPage} />;
                    case 'startFarming':    return <StartFarmingPage />;
                    case 'greenhouse':      return <GreenhousePage />;
                    case 'safety':          return <SafetyPage lang={t} />;
                    case 'audit':           return <AuditPage />;
                    case 'healthPromo':     return <HealthPromoPage />;
                    case 'economics':       return <EconomicsPage />;
                    case 'forum':           return <ForumPage />;
                    case 'videos':          return <VideosPage />;
                    case 'resources':       return <ResourcesPage />;
                    default:                return <HomePage setPage={setPage} lang={t} currentDate={currentDate} />;
                }
            };

            const goRole = (id) => {
                setPage(id);
                setMenuOpen(false);
            };

            return (
                <div className="min-h-screen bg-slate-50 font-sans text-slate-800 selection:bg-emerald-200">
                    {/* Navbar */}
                    <nav className={`fixed top-0 w-full z-50 transition-all duration-300 ${scrolled ? 'bg-white/95 backdrop-blur-md shadow-md py-2' : 'bg-emerald-900 text-white py-3'}`}>
                        <div className="max-w-[1400px] mx-auto px-4">
                            <div className="flex justify-between items-center">
                                <div className="flex items-center cursor-pointer gap-2 shrink-0" onClick={() => setPage('home')}>
                                    <img 
                                        src="Logo.PNG"
                                        alt="Logo" 
                                        className="w-16 h-16 object-contain bg-white rounded-lg"
                                    />
                                    <span className={`font-extrabold text-xl tracking-tight hidden sm:block ${scrolled ? 'text-emerald-900' : 'text-white'}`}>
                                        {t.title}
                                    </span>
                                </div>

                                {/* Desktop Nav */}
                                <div className="hidden lg:flex items-center gap-3 overflow-x-auto no-scrollbar mx-4">
                                    {navItems.map(item => (
                                        <button 
                                            key={item.id} 
                                            onClick={() => setPage(item.id)} 
                                            className={`px-3 py-2 rounded-full text-sm font-bold whitespace-nowrap transition-all ${
                                                page === item.id 
                                                    ? (scrolled ? 'bg-emerald-100 text-emerald-700' : 'bg-white/20 text-white') 
                                                    : (scrolled ? 'text-slate-500 hover:bg-slate-100' : 'text-emerald-100 hover:text-white hover:bg-white/10')
                                            }`}
                                        >
                                            {item.label}
                                        </button>
                                    ))}

                                    {/* è§’è‰²å°ˆå€ï¼šç›´æ¥ä¸‰é¡†æŒ‰éˆ•ï¼Œä¸å†ç”¨ä¸‹æ‹‰ */}
                                    <div className="flex items-center gap-1 pl-2 ml-2 border-l border-emerald-700/30">
                                        {roleItems.map(r => (
                                            <button
                                                key={r.id}
                                                onClick={() => goRole(r.id)}
                                                className={`px-2.5 py-1.5 rounded-full text-xs font-bold flex items-center gap-1 ${
                                                    page === r.id
                                                        ? 'bg-emerald-200 text-emerald-900'
                                                        : 'bg-emerald-800/40 text-emerald-50 hover:bg-emerald-700/70'
                                                }`}
                                            >
                                                {r.icon}
                                                <span>{r.label}</span>
                                            </button>
                                        ))}
                                    </div>
                                </div>

                                {/* Mobile Menu æŒ‰éˆ• */}
                                <div className="flex items-center gap-2 lg:hidden">
                                    <button
                                        onClick={() => setMenuOpen(!menuOpen)}
                                        className={`p-2 ${scrolled ? 'text-slate-800' : 'text-white'}`}
                                    >
                                        {menuOpen ? <X size={24}/> : <Menu size={24}/>}
                                    </button>
                                </div>
                            </div>
                        </div>

                        {/* Mobile Nav */}
                        {menuOpen && (
                            <div className="lg:hidden absolute top-full left-0 w-full bg-white border-t border-slate-100 shadow-xl animate-fade-in z-40">
                                <div className="p-4 space-y-3">
                                    <div className="bg-emerald-50 rounded-2xl p-3 border border-emerald-100">
                                        <div className="flex items-center gap-2 mb-2">
                                            <User size={16} className="text-emerald-700"/>
                                            <span className="text-xs font-bold text-emerald-800">è§’è‰²å°ˆå€</span>
                                        </div>
                                        <div className="flex flex-wrap gap-2">
                                            {roleItems.map(r => (
                                                <button
                                                    key={r.id}
                                                    type="button"
                                                    onClick={() => goRole(r.id)}
                                                    className="flex-1 min-w-[30%] bg-white rounded-xl px-3 py-2 text-xs font-semibold text-slate-700 border border-emerald-100 flex items-center gap-1"
                                                >
                                                    {r.icon}
                                                    <span className="truncate">{r.label}</span>
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                    {navItems.map(item => (
                                        <button
                                            key={item.id}
                                            onClick={() => setPage(item.id)}
                                            className={`block w-full text-left px-4 py-3 rounded-xl text-base font-bold ${
                                                page === item.id ? 'bg-emerald-50 text-emerald-700' : 'text-slate-600 hover:bg-slate-50'
                                            }`}
                                        >
                                            {item.label}
                                        </button>
                                    ))}
                                </div>
                            </div>
                        )}
                    </nav>

                    {/* Main */}
                    <main className="min-h-screen pt-16">
                        {renderPage()}
                    </main>

                    {/* Footer */}
                    <footer className="bg-slate-900 text-slate-400 py-16 mt-12">
                        <div className="max-w-6xl mx-auto px-4 grid md:grid-cols-4 gap-12 mb-12">
                            <div className="col-span-1 md:col-span-2">
                                <div className="flex items-center gap-2 text-white font-bold text-2xl mb-6">
                                    <img src="Logo.PNG" className="w-16 h-16 object-contain bg-white rounded-md" alt="logo"/> 
                                    {t.title}
                                </div>
                                <p className="text-sm leading-relaxed max-w-sm">
                                    å…±æ§‹é›²å˜‰è¾²æ¥­å·¥ä½œè€…è·æ¥­å¥åº·çš„ç¤¾æœƒå®‰å…¨ç¶²ã€‚
                                </p>
                            </div>
                            <div>
                                <h4 className="text-white font-bold mb-6">è¯çµ¡æˆ‘å€‘</h4>
                                <ul className="space-y-3 text-sm">
                                    <li>æŒ‡å°å–®ä½ï¼šåœ‹å®¶ç§‘å­¸å§”å“¡æœƒ</li>
                                    <li>è¨ˆç•«ä¸»æŒå–®ä½ï¼šåœ‹ç«‹ä¸­æ­£å¤§å­¸</li>
                                    <li>åˆä½œå¤¥ä¼´ï¼šè‡ºå¤§é†«é™¢é›²åˆ†é™¢è¾²æ¥­ç’°å¢ƒèˆ‡è·æ¥­å¥åº·ä¸­å¿ƒã€æ°‘é›„é„‰è¾²æœƒ</li>
                                </ul>
                            </div>
                        </div>
                        <div className="max-w-6xl mx-auto px-4 pt-8 border-t border-slate-800 text-center text-xs">
                            Â© 2025 Dignified Agriculture Project.
                        </div>
                    </footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
